{"version":3,"sources":["app.js","controllers/appCtrl.js","controllers/controllers.js","directives/directives.js","filters/filters.js","services/services.js"],"names":["app","angular","module","document","URL","indexOf","constant","config","$compileProvider","$logProvider","$animateProvider","debugEnabled","debugInfoEnabled","FacebookProvider","$httpProvider","RestangularProvider","apiBase","setAppId","setBaseUrl","interceptors","push","$q","$location","$localStorage","$rootScope","Auth","request","headers","token","Authorization","response","t","replace","responseError","status","data","error","resetProfile","path","console","log","reject","run","$cordovaSplashscreen","$cordovaKeyboard","$cordovaStatusbar","window","addEventListener","FastClick","body","style","styleHex","hideAccessoryBar","hide","$mdThemingProvider","myPaletteMap","extendPalette","contrastDefaultColor","contrastDarkColors","contrastLightColors","500","50","100","200","300","400","600","700","definePalette","theme","primaryPalette","default","hue-1","hue-2","hue-3","accentPalette","warnPalette","backgroundPalette","dark","$stateProvider","$urlRouterProvider","$locationProvider","appBase","state","abstract","templateUrl","url","controller","template","resolve","messagingUser","Restangular","$stateParams","d","defer","one","user_id","get","then","r","promise","profile","id","views","","@web.app.dashboard.user","@web.app.dashboard","otherwise","html5Mode","enabled","requireBase","$scope","$mdSidenav","$mdMedia","$state","AppService","Me","$filter","Pusher","location","user","userProfile","composingPost","tokHashId","hash_id","ui","showSearch","showSideNav","toggleNav","which","toggle","toggleSearchBox","getCategoriesWithCount","cats","l","length","i","count","categories","originatorEv","openMenu","$mdOpenMenu","ev","logout","redirect","go","menu","link","title","icon","condition","click","menuAuth","action","getSearchResultIcon","type","searchIcons","tag","searchRepo","query","search","getList","q","plain","getIndexById","arr","obj","clearNotifications","chat_id","idx","messages","notifications","splice","$$phase","$digest","checkIfCurrentChat","chat","current","name","users","username","initPusher","channel","subscribe","bind","notif_channel","refreshProfile","authenticated","UXService","$document","home","posts","posts_loading","loadPosts","load","param","getPosts","err","toast","cat","category","Facebook","fb_button","getLoginStatus","api","fb_logged_in","fb_name","loginFB","signinFB","UXLoginFB","UXSubmitLogin","loginDetails","submitLogin","signin","$mdDialog","refresh","newUser","signupFb","login","fields","show","alert","parent","element","querySelector","clickOutsideToClose","ariaLabel","ok","submitForm","signupForm","$valid","signup","me","user_profile","activities","loading","favorites","taps","loadUserProfile","loadUserActivities","all","loadUserFavorites","loadUserTaps","Upload","saveAccountInfo","post","first_name","last_name","section_account","saveAboutInfo","favorite_book","favorite_verse","favorite_parable","denomination","section_about_me","uploadAvatar","file","uploading","upload","dataUrltoBlob","avatar","picFile","dataUrl","$timeout","result","errorMsg","evt","progress","parseInt","loaded","total","changePassword","password","newPassword","newPassword1","resp","chats","getOtherUser","otherUser","goToMessage","inputMessage","push_new_message","message","$","animate","scrollTop","scrollHeight","pm","sendMessage","trim","socket_id","connection","$mdToast","selectedCategories","files","newPost","creating","on","getCategories","toggleCatPopup","showSelectCatPopup","catsClick","catsExists","removePicture","uploadImages","finished","doUpload","complete","image_id","failed","Math","min","forEach","composePost","anonymous","$viewValue","createPost","o","sendPost","p","a","images","unshift","emojiMessage","rawhtml","id_arr","cancel","answer","res","actives","filePostIn","directive","restrict","transclude","PostService","scope","this","SDeletePost","post_id","remove","map","x","noPosts","CommentService","appUrl","require","attrs","SuperTPostsCtrl","CommentsUI","retryButton","actions","App\\Tap","App\\Favorite","App\\Amen","App\\Comment","user_ref_activities","interpretation","ref_activities","a_t","action_type","showMore","less","more","postWordsCount","text","split","all_array","slice","join","optimizedText","post_truncate","toggleMore","prayer","amens_count","taps_count","comments_count","showCommentBox","openCommentBox","comments","addComment","doCommentPost","commentBox","signinModal","deleteComment","comment_id","comment","toggleFavorite","doFavorite","favorited","favorites_count","toggleTap","doTap","tapped_into","sayAmen","doSayAmen","amen","shareToFb","options","method","picture","caption","description","isCordova","$cordovaFacebook","showDialog","success","deletePost","e","filter","num","out","round","factory","cordova","service","pusher","encrypted","authEndpoint","auth","rawToken","$window","facebookConnectPlugin","getElementsByClassName","targetEvent","simple","content","position","hideDelay","$http","urlBase64Decode","str","output","atob","getClaimsFromToken","claims","encoded","JSON","parse","firstName","lastName","sex","email","setFullResponse","exp","Date","now","buildAuthProfile","u","saveToken","doFbLogin","fb_response","json","fb_access_token","authResponse","accessToken","tokenClaims","uid","sub"],"mappings":"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","file":"app.js","sourcesContent":["//\"use strict\";\nvar app = angular.module('testify', ['ngMaterial',\n  'chieffancypants.loadingBar',\n  'ngAnimate',\n  'ngMessages',\n  'angularMoment',\n  'ui.router',\n  'ngStorage',\n  'restangular',\n  'facebook',\n  'ngFileUpload',\n  'ngImgCrop',\n  'ngTextTruncate',\n  'emojiApp',\n  'ngCordova'\n]);\n\nif ( document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1 ) {\n  app.constant('apiBase', \"https://testify-staging.herokuapp.com/api/v1\");\n  app.constant('appBase', \"/\");\n  app.constant('appUrl', \"https://testify-staging.herokuapp.com\");\n} else {\n  app.constant('appUrl', \"https://testify-staging.herokuapp.com\");\n  app.constant('appBase', \"/\");\n  app.constant('apiBase', \"api/v1\");\n}\n\napp.config(['$compileProvider', '$logProvider', '$animateProvider', function ($compileProvider, $logProvider, $animateProvider) {\n  $logProvider.debugEnabled(false);\n  $compileProvider.debugInfoEnabled(false);\n  //$animateProvider.classNameFilter( /\\banimated\\b/ );\n}]);\n\napp.config(function(FacebookProvider, $httpProvider, RestangularProvider,\n  apiBase) {\n  FacebookProvider.setAppId(180042792329807);\n  RestangularProvider.setBaseUrl(apiBase);\n\n  $httpProvider.interceptors.push(['$q', '$location', '$localStorage',\n    function($q, $location, $localStorage, $rootScope, Auth) {\n      return {\n        'request': function(config) {\n          config.headers = config.headers || {};\n          if ($localStorage.token) {\n            config.headers.Authorization = 'Bearer ' + $localStorage.token;\n          }\n          return config;\n        },\n        'response': function(response) {\n          var t = response.headers('Authorization');\n          if (t) {\n            t.replace('Bearer ', '');\n            $localStorage.token = t;\n            //console.log(t);\n          }\n\n          return response;\n        },\n        'responseError': function(response) {\n          if (response.status === 401 || response.status === 400 ||\n            response.status === 403) {\n            if (response.data.error == 'token_expired') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            } else if (response.data.error == 'token_invalid') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            } else if (response.data.error == 'Bad Authorization') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            } else if (response.data.error == 'token_not_provided') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            }\n\n\n\n            console.log(\"Unauthorized or forbidden\");\n\n          }\n          return $q.reject(response);\n        }\n      };\n    }\n  ]);\n});\n\napp.run(['$cordovaSplashscreen', '$cordovaKeyboard', '$cordovaStatusbar', function($cordovaSplashscreen, $cordovaKeyboard, $cordovaStatusbar) {\n  window.addEventListener('load', function() {\n    new FastClick(document.body);\n  }, false);\n\n  if(document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1){\n    document.addEventListener(\"deviceready\", function () {\n      $cordovaStatusbar.style(1);\n      $cordovaStatusbar.styleHex('#819CAD');\n      $cordovaKeyboard.hideAccessoryBar(true);\n      $cordovaSplashscreen.hide();\n\n    }, false);\n  }\n\n}]);\n\napp.config(function($mdThemingProvider) {\n  var myPaletteMap = $mdThemingProvider.extendPalette('blue', {\n\n    'contrastDefaultColor': 'light',\n    'contrastDarkColors': '200, 300',\n    'contrastLightColors': '500',\n    '500': '97B6CA',\n    '50': '1C3456',\n    '100': '5DADE0',\n    '200': 'e74c3c',\n    '300': 'FFFFFF',\n    '400': 'F4F4F4',\n    '600': '27ae60',\n    '700': '77777E'\n  });\n  $mdThemingProvider.definePalette('palette', myPaletteMap);\n  //console.log(myPaletteMap);\n  $mdThemingProvider.theme('default')\n    .primaryPalette('palette', {\n      'default': '500',\n      'hue-1': '50',\n      'hue-2': '100',\n      'hue-3': '300',\n    })\n    .accentPalette('palette', {\n      'default': '200',\n      'hue-1': '600',\n      'hue-2': '700'\n\n    })\n    .warnPalette('red', {\n\n    });\n\n  $mdThemingProvider.theme('input', 'default')\n    .primaryPalette('grey', {\n\n    })\n    .backgroundPalette('palette', {\n      'default': '500'\n    }).dark();\n\n  $mdThemingProvider.theme('search', 'default')\n    .primaryPalette('yellow', {\n\n    })\n    .backgroundPalette('palette', {\n      'default': '50'\n    }).dark();\n\n  ///$mdIconProvider.defaultFontSet(\"mdi\", \"mdi-\");\n});\n\napp.config(function($stateProvider, $urlRouterProvider, $locationProvider,\n  appBase) {\n  $stateProvider\n    .state('web', {\n      //url: appBase,\n      abstract: true,\n      templateUrl: 'views/web.html'\n    }).state('web.app', {\n      abstract: true,\n      url: appBase,\n      templateUrl: 'views/web.app.html'\n    }).state('web.app.login', {\n      url: 'login',\n      templateUrl: 'views/web.app.login.html',\n    }).state('web.app.signup', {\n      url: 'signup',\n      controller: 'LoginCtrl',\n      templateUrl: 'views/web.app.signup.html'\n    }).state('web.app.logout', {\n      url: 'logout',\n      controller: 'LogoutCtrl',\n      template: \" \"\n    }).state('web.app.landing', {\n      url: '',\n      templateUrl: 'views/web.app.landing.html',\n    }).state('web.app.forgot', {\n      url: 'forgot',\n      templateUrl: 'views/web.app.forgot-password.html',\n    }).state('web.app.dashboard', {\n      abstract: true,\n      url: '',\n      templateUrl: 'views/web.app.dashboard.html',\n    }).state('web.app.dashboard.home', {\n      url: 'home',\n      templateUrl: 'views/web.app.dashboard.home.html'\n    }).state('web.app.dashboard.messages', {\n      url: 'messages',\n      templateUrl: 'views/web.app.dashboard.messages.html'\n    }).state('web.app.dashboard.message', {\n      url: 'messages/:user_id',\n      templateUrl: 'views/web.app.dashboard.message.html',\n      controller: 'MessageCtrl',\n      resolve: {\n        messagingUser: function(Restangular, $stateParams, $q){\n          var d = $q.defer();\n          Restangular.one('users', $stateParams.user_id).get().then(\n            function(r) {\n              d.resolve(r.data);\n            });\n          return d.promise;\n        }\n      }\n    }).state('web.app.dashboard.post', {\n      url: 'posts/:hash_id',\n      templateUrl: 'views/web.app.dashboard.post.html'\n    }).state('web.app.dashboard.posts', {\n      url: 'posts?cat',\n      templateUrl: 'views/web.app.dashboard.home.html'\n    }).state('web.app.dashboard.user', {\n      url: 'user/:id',\n      resolve: {\n        profile: function($stateParams, Restangular) {\n          return Restangular.one('users', $stateParams.id).get();\n        }\n      },\n      views: {\n        '': {\n          templateUrl: \"views/web.app.dashboard.profile.html\",\n          controller: 'ProfileCtrl',\n        },\n        '@web.app.dashboard.user': {\n          templateUrl: 'views/web.app.dashboard.profile.activities.html',\n        }\n      }\n    }).state('web.app.dashboard.user.activities', {\n      url: '/activities',\n      templateUrl: 'views/web.app.dashboard.profile.activities.html',\n    }).state('web.app.dashboard.user.favorites', {\n      url: '/favorites',\n      templateUrl: 'views/web.app.dashboard.profile.favorites.html',\n    }).state('web.app.dashboard.user.taps', {\n      url: '/taps',\n      templateUrl: 'views/web.app.dashboard.profile.taps.html',\n    }).state('web.app.dashboard.user.edit', {\n      url: '/edit',\n      views: {\n        '@web.app.dashboard': {\n          templateUrl: 'views/web.app.dashboard.profile.edit.html'\n\n        }\n      }\n    });\n\n  $urlRouterProvider.otherwise(appBase + \"home\");\n\n  if ( document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1 ) {\n\n  } else {\n    $locationProvider.html5Mode({\n      enabled: true,\n      requireBase: false\n    });\n  }\n\n});\n","app.controller('AppCtrl', function($rootScope, $scope, $mdSidenav, $mdMedia,\n  $location, $state, $q, AppService, Auth, Me, appBase, $filter, Pusher, $stateParams) {\n  $scope.location = $location;\n  $scope.user = Auth.userProfile;\n  $scope.composingPost = false;\n  $scope.tokHashId = Auth.token.hash_id;\n  //$state.go('web.app.login');\n\n  $scope.ui = {\n    showSearch: false,\n    showSideNav: $state,\n    toggleNav: function(which) {\n      $mdSidenav(which).toggle();\n      //console.log(which);\n    },\n    toggleSearchBox: function() {\n      $scope.ui.showSearch = !$scope.ui.showSearch;\n    }\n  };\n  //console.log($state);\n  //$scope.ui.showSideNav = $state.current.data.showSideNav;\n  //console.log($scope.tokHashId);\n  AppService.getCategoriesWithCount.then(function(cats) {\n    var l = cats.data.length;\n    for(var i = 0; i < l; i++){\n      cats.data[i].count = $filter('socialCounter')(cats.data[i].count);\n    }\n\n    $scope.categories = cats.data;\n  });\n\n\n  var originatorEv;\n  $scope.openMenu = function($mdOpenMenu, ev) {\n    originatorEv = ev;\n    $mdOpenMenu(ev);\n    //console.log(ev)\n  };\n\n  $scope.logout = function() {\n    Auth.logout();\n    //Me.callInit();\n    //console.log($scope.user);\n  };\n\n  $scope.redirect = function(state) {\n    $state.go(state);\n  };\n\n  $scope.menu = [{\n    link: '',\n    state: 'web.app.dashboard.home',\n    title: 'Feeds',\n    icon: 'home',\n    condition: true,\n    click: ''\n  }];\n\n  $scope.menuAuth = [{\n    link: 'profile',\n    state: \"web.app.dashboard.user({id: user.username || user.hash_id})\",\n    title: 'Profile',\n    icon: 'account',\n    condition: 'user.authenticated',\n    action: null\n  }, {\n    link: '',\n    state: 'web.app.dashboard.messages',\n    title: 'Messages',\n    icon: 'message-text-outline',\n    condition: 'user.authenticated',\n    click: ''\n  }, {\n    link: '',\n    state: \"web.app.dashboard.user.favorites({id: user.username || user.hash_id})\",\n    title: 'Favourites',\n    icon: 'star',\n    condition: 'user.authenticated',\n    action: null\n  }, {\n    link: '',\n    state: \"web.app.dashboard.user.edit({id: user.username || user.hash_id})\",\n    title: 'Preferences',\n    icon: 'settings',\n    condition: 'user.authenticated',\n    action: null\n  }];\n\n  $scope.getSearchResultIcon = function(type) {\n    //console.log(icon[type]);\n    return icon[type];\n  };\n\n  $scope.searchIcons = {\n    \"tag\": \"pound\",\n    \"user\": \"at\"\n  };\n\n  $scope.searchRepo = function(query) {\n    var d = $q.defer();\n    AppService.search.getList({\n      q: query\n    }).then(function(response) {\n      d.resolve(response.data.plain());\n      //console.log(response.data.plain());\n      //return result;\n    }, function() {\n      d.reject();\n    });\n\n    return d.promise;\n  };\n\n  var getIndexById = function(arr, obj){\n    var count = arr.length;\n    for(i = 0; i < count; i++){\n      if(arr[i].id == obj.id || obj ){\n        return i;\n      }\n    }\n    return -1;\n  };\n\n  var clearNotifications = function(chat_id){\n\n    var idx = getIndexById($scope.app.messages.notifications, chat_id);\n    if(idx >= 0){\n      $scope.app.messages.notifications.splice(idx, 1);\n    }\n    if(!$scope.$$phase){\n      $scope.$digest();\n    }\n  };\n\n  var checkIfCurrentChat = function(chat){\n    if($state.current.name == \"web.app.dashboard.message\"){\n        var count = chat.users.length;\n        for(i = 0; i < count; i++){\n          if(chat.users[i].hash_id == $stateParams.user_id || chat.users[i].username == $stateParams.user_id){\n            return true;\n          }\n        }\n        return false;\n      }\n    };\n\n  var initPusher = function(){\n    var channel = Pusher.subscribe('general');\n    channel.bind('my_event', function(data) {\n      //alert(data.message);\n    });\n\n    var notif_channel = 'private-notifications-'+ Auth.token.hash_id;\n    var notifications = Pusher.subscribe(notif_channel);\n\n\n\n    notifications.bind('new_message', function(data) {\n      //console.log(\"notif_bind\");\n      if(checkIfCurrentChat(data.chat)){\n\n      }else{\n        var idx = getIndexById($scope.app.messages.notifications, data.chat);\n        if(idx == -1){\n          $scope.app.messages.notifications.push(data.chat);\n        }\n        $scope.$digest();\n      }\n\n    });\n\n    notifications.bind('pusher:subscription_error', function(status) {\n      if(status == 408 || status == 503){\n        // retry?\n      }\n    });\n  };\n\n  initPusher();\n\n  //clearNotifications(1);\n  $scope.app = {\n    messages: {\n      notifications: [],\n      clearNotifications: clearNotifications\n    }\n  };\n\n\n\n});\n","app.controller('LandingCtrl', ['Auth', '$state', function(Auth, $state) {\n  Auth.refreshProfile().then(function(){\n    if (Auth.userProfile.authenticated === true) {\n      $state.go('web.app.dashboard.home');\n    }\n  });\n\n\n}]);\n\napp.controller('PostsCtrl', ['AppService', 'Me', '$scope', '$state',\n  '$stateParams', 'Restangular', 'UXService', '$document',\n  function(AppService, Me, $scope, $state, $stateParams, Restangular,\n    UXService, $document) {\n\n      $scope.home = {\n        posts: [],\n        posts_loading: false\n      };\n\n      if ($state.current.name == \"web.app.dashboard.post\") {\n        $scope.home.posts_loading = true;\n\n        Restangular.one('posts', $stateParams.hash_id).get().then(\n          function(r) {\n            $scope.home.posts = [r.data];\n            $scope.home.posts_loading = false;\n          }\n        );\n      }\n\n      if ($state.current.name == \"web.app.dashboard.home\" || \"web.app.dashboard.posts\"){\n        var loadPosts = function() {\n          var param = null;\n          $scope.home.posts_loading = true;\n\n          if ($stateParams.cat) {\n            load({\n              category: $stateParams.cat\n            });\n          } else {\n            load({});\n          }\n\n\n          function load(param) {\n\n            AppService.getPosts.getList(param).then(function(r) {\n              //console.log(AppService.app);\n              $scope.home.posts = r.data;\n              AppService.app.posts = r.data;\n              /*l = r.data.length;\n              for (i = 0; i < l; i++) {\n                  AppService.app.posts.unshift(r.data[i]);\n              }*/\n\n              $scope.home.posts_loading = false;\n              //console.log(r.data.plain());\n            }, function(err) {\n              $scope.home.posts_loading = false;\n              //console.log(err);\n              UXService.toast(\"Something's wrong\");\n            });\n          }\n        };\n\n        loadPosts();\n      }\n\n\n  }\n]);\n\napp.controller('LoginCtrl', ['$scope', 'UXService', 'Facebook', '$q', '$state',\n  'Auth', 'Me', 'appBase',\n  function($scope, UXService, Facebook, $q, $state, Auth, Me, appBase) {\n\n    if (Auth.userProfile.authenticated === true) {\n      $state.go('web.app.dashboard.home');\n    }\n\n    $scope.fb_button = \"Login with Facebook\";\n\n    Facebook.getLoginStatus(function(r) {\n      //console.log(r);\n      if (r.status === 'connected') {\n        //console.log(r);\n        Facebook.api('/me', function(r) {\n          $scope.fb_logged_in = true;\n          $scope.fb_name = r.name;\n          $scope.fb_button = \"Continue as \" + $scope.fb_name;\n        });\n        //console.log(r);\n      } else {\n        //console.log(\"false;\");\n        $scope.fb_logged_in = false;\n        $scope.fb_name = \"null\";\n        $scope.fb_button = \"Login with Facebook\";\n      }\n    });\n\n    $scope.loginFB = function() {\n      Auth.signinFB().then(function() {\n        $state.go('web.app.dashboard.home');\n      }, function(r) {\n        UXService.toast(r.data.error);\n      });\n    };\n\n    $scope.UXLoginFB = function() {\n      UXService.UXLoginFB();\n    };\n\n    $scope.UXSubmitLogin = function() {\n      UXService.UXSubmitLogin($scope.loginDetails);\n    };\n\n    var refresh = function() {\n      Facebook.api(\"/me\", {\n        fields: 'id,name,email,access_token'\n      }).then(\n        function(response) {\n          $scope.welcomeMsg = \"Welcome \" + response.name;\n          console.log(response);\n          //console.log(JSON.stringify(response));\n        },\n        function(err) {\n          $scope.welcomeMsg = \"Please log in\";\n        });\n    };\n\n    $scope.submitLogin = function() {\n      Auth.signin($scope.loginDetails).then(function(r) {\n        //console.log($scope.user);\n        $state.go('web.app.dashboard.home');\n        //Me.callInit();\n        //Success Login\n      }, function(err) {\n        UXService.toast('Wrong username or password');\n      });\n    };\n\n  }\n]);\n\napp.controller('SignupCtrl', ['$scope', 'Facebook', 'Auth', '$location',\n  '$mdDialog', '$state',\n  function($scope, Facebook, Auth, $location, $mdDialog, $state) {\n    var refresh;\n\n    $scope.newUser = {};\n    $scope.signupFb = function() {\n      Facebook.login().then(function() {\n        refresh();\n      });\n    };\n\n    refresh = function() {\n      Facebook.api(\"/me\", {\n        fields: 'id,first_name,last_name,email'\n      }).then(\n        function(response) {\n          Facebook.logout();\n          //$scope.welcomeMsg = \"Welcome \" + response.name;\n          //console.log(response);\n          //console.log(JSON.stringify(response));\n          //Auth.BuildSession(name, id, lastname for appctrl scope);\n          //$location.path('/');\n        },\n        function(err) {\n          $mdDialog.show(\n            $mdDialog.alert()\n            .parent(angular.element(document.querySelector('body')))\n            .clickOutsideToClose(true)\n            .title('Login failed!')\n            //.content('Login failed')\n            .ariaLabel('Failed login')\n            .ok('close')\n            //.targetEvent(ev)\n          );\n\n          //$scope.welcomeMsg = \"Please log in\";\n        });\n    };\n\n    $scope.submitForm = function() {\n      //console.log($scope.newUser);\n      //console.log($scope.signupForm.$valid);\n      if ($scope.signupForm.$valid) {\n        Auth.signup($scope.newUser).then(\n          function(r) {\n\n            $state.go('web.app.dashboard.home');\n            //console.log(r);\n          },\n          function(r) {\n            //console.log(r);\n          });\n      }\n    };\n\n  }\n]);\n\napp.controller('LogoutCtrl', ['$scope', 'Auth', 'Me', function($scope, Auth, Me) {\n  Auth.logout();\n  //$scope.logout();\n  console.log(\"mayama\");\n}]);\n\napp.controller('ProfileCtrl', ['Restangular', '$scope', '$stateParams',\n  '$state', 'Auth',\n  function(Restangular, $scope, $stateParams, $state, Auth) {\n    //console.log(profile);\n    $scope.me = Auth.userProfile;\n    var user_profile = Restangular.one('users', $stateParams.id);\n\n    $scope.user = {\n      profile: {},\n      activities: {posts:[], loading: true},\n      favorites: {posts:[], loading: true},\n      taps: {posts:[], loading: true}\n    };\n\n    $scope.loadUserProfile = function() {\n      Restangular.one('users', $stateParams.id).one('profile').get().then(function(r){\n        $scope.user_profile = r.data;\n      });\n    };\n\n    $scope.loadUserActivities = function() {\n      $scope.user.activities.loading = true;\n      user_profile.all('activities').getList().then(function(r) {\n        $scope.user.activities.posts = r.data;\n        $scope.user.activities.loading = false;\n      });\n    };\n\n    $scope.loadUserFavorites = function() {\n      $scope.user.favorites.loading = true;\n\n      user_profile.all('favorites').getList().then(function(r) {\n        $scope.user.favorites.posts = r.data;\n        $scope.user.favorites.loading = false;\n\n      });\n    };\n\n    $scope.loadUserTaps = function() {\n      $scope.user.taps.loading = true;\n\n      user_profile.all('taps').getList().then(function(r) {\n        $scope.user.taps.posts = r.data;\n        $scope.user.taps.loading = false;\n\n      });\n    };\n\n    var load = function(){\n      $scope.loadUserProfile();\n\n      switch ($state.current.name) {\n        case 'web.app.dashboard.user.favorites':\n          $scope.loadUserFavorites();\n          break;\n        case 'web.app.dashboard.user.taps':\n          $scope.loadUserTaps();\n          break;\n        case 'web.app.dashboard.user.activities':\n          $scope.loadUserActivities();\n          break;\n        default:\n          $scope.loadUserActivities();\n        }\n\n    };\n\n    load();\n\n\n\n\n\n  }\n]);\n\napp.controller('ProfileEditCtrl', ['Restangular', '$scope', '$stateParams',\n  '$state', 'Upload', 'Auth', 'UXService', 'apiBase',\n  function(Restangular, $scope, $stateParams, $state, Upload, Auth,\n    UXService, apiBase) {\n    //console.log(profile);\n    Restangular.one('users', $stateParams.id).one(\n      'profile').get({\n      'profile': true\n    }).then(\n      function(r) {\n        $scope.user_profile = r.data;\n      }\n    );\n    $scope.user = Auth.userProfile;\n\n    if (!(Auth.userProfile.hash_id == $stateParams.id || Auth.userProfile.username ==\n        $stateParams.id)) {\n      console.log($stateParams);\n      $state.go('web.app.dashboard.home');\n    }\n\n    $scope.saveAccountInfo = function(obj) {\n      Restangular.one('users', $scope.user.hash_id).one('profile').post(\n        '', obj).then(function(r) {\n        Auth.userProfile.first_name = obj.first_name;\n        Auth.userProfile.last_name = obj.last_name;\n        Auth.userProfile.username = obj.username;\n\n        $scope.section_account = false;\n      });\n\n    };\n\n    $scope.saveAboutInfo = function(obj) {\n      Restangular.one('users', $scope.user.hash_id).one('profile').post(\n        '', obj);\n      Auth.userProfile.location = obj.location;\n      if(Auth.userProfile.profile === null){\n        Auth.userProfile.profile = {};\n      }\n      Auth.userProfile.profile.favorite_book = obj.favorite_book;\n      Auth.userProfile.profile.favorite_verse = obj.favorite_verse;\n      Auth.userProfile.profile.favorite_parable = obj.favorite_parable;\n      Auth.userProfile.profile.denomination = obj.denomination;\n\n      $scope.section_about_me = false;\n    };\n\n    $scope.uploadAvatar = function(file) {\n      $scope.uploading = true;\n\n      Upload.upload({\n        url: apiBase + '/users/' + Auth.userProfile.hash_id +\n          '/profile/avatar',\n        data: {\n          file: Upload.dataUrltoBlob(file)\n        }\n\n\n      }).then(function(r) {\n        Auth.userProfile.avatar = r.data.url;\n        UXService.toast('Successfully updated your display picture');\n\n      }, function() {\n        //console.log(file);\n        UXService.toast('Changing display picture wasn\\'t successful');\n      }).finally(function() {\n        $scope.uploading = false;\n        $scope.picFile = '';\n      });\n    };\n\n    $scope.upload = function(dataUrl) {\n      console.log(9);\n      Upload.upload({\n        url: 'https://angular-file-upload-cors-srv.appspot.com/upload',\n        data: {\n          file: Upload.dataUrltoBlob(dataUrl)\n        },\n      }).then(function(response) {\n        $timeout(function() {\n          $scope.result = response.data;\n        });\n      }, function(response) {\n        if (response.status > 0) $scope.errorMsg = response.status +\n          ': ' + response.data;\n      }, function(evt) {\n        $scope.progress = parseInt(100.0 * evt.loaded / evt.total);\n      });\n    };\n\n    $scope.changePassword = function() {\n      if ($scope.password.newPassword &&\n        $scope.password.newPassword1 && $scope.password.newPassword === $scope.password.newPassword1) {\n        Restangular.one('users', $scope.user.hash_id).post('password',\n          $scope.password).then(function(resp) {\n          if (resp.status == 202) {\n            UXService.toast('Successfully changed password');\n          }\n        }, function(resp) {\n          UXService.toast('Something\\'s wrong');\n        });\n      } else {\n        UXService.toast('Please repeat the password');\n      }\n    };\n\n  }\n]);\n\napp.controller('MessagesCtrl', ['$scope', '$state', '$stateParams', 'Restangular', 'Auth' , 'Pusher', function($scope, $state, $stateParams, Restangular, Auth, Pusher) {\n  $scope.chats = [];\n\n  Restangular.all('me').all('messages').getList().then(\n    function(r) {\n      console.log(r);\n      var getOtherUser = function(users){\n        var count  = users.length;\n        for(i = 0; i < count; i++){\n          if(users[i].id != Auth.userProfile.id){\n            return users[i];\n          }\n        }\n      };\n\n      var count = r.data.length;\n      for(i = 0; i < count; i++){\n        r.data[i].otherUser = getOtherUser(r.data[i].users);\n      }\n\n      $scope.chats = r.data;\n    },function(r) {\n\n    }\n  );\n\n  $scope.goToMessage = function(user_id){\n    $state.go('web.app.dashboard.message', {user_id: user_id });\n\n  };\n\n}]);\n\napp.controller('MessageCtrl', ['$scope', 'messagingUser', 'Restangular', 'Auth', '$stateParams', '$state', 'Pusher', function($scope, messagingUser, Restangular, Auth, $stateParams, $state, Pusher){\n  $scope.messages = [];\n  $scope.inputMessage = '';\n  $scope.messagingUser = messagingUser;\n\n  if(!$stateParams.user_id){\n    $state.go('web.app.dashboard.home');\n  }\n\n  var push_new_message = function(message){\n    $scope.messages.push(message);\n\n    $(\"#messages-container\").animate({\n        scrollTop: $(\"#messages-container\")[0].scrollHeight + 500\n    }, 500);\n    if(!$scope.$$phase){\n      $scope.$digest();\n    }\n    $scope.app.messages.clearNotifications(r.data.chat);\n  };\n\n  Restangular.all('me').all('messages').one($stateParams.user_id).get().then(\n    function(r) {\n      //console.log($stateParams.user_id);\n      $scope.messages = r.data.messages;\n      if(r.data.messages.length){\n        $scope.app.messages.clearNotifications(r.data.chat);\n      }\n      var pm = Pusher.subscribe('private-message-' + r.data.chat.id);\n\n      pm.bind('new_message', push_new_message);\n\n      $(\"#messages-container\").animate({\n          scrollTop: $(\"#messages-container\")[0].scrollHeight + 500\n      }, 1);\n\n    },function(r) {\n\n  });\n\n  $scope.sendMessage = function(){\n      if($scope.inputMessage.trim()){\n        Restangular.all('users').one($stateParams.user_id).all('messages').post({\n          message: $scope.inputMessage,\n          socket_id: Pusher.connection.socket_id\n        }).then(function(r){\n          $scope.messages.push(r.data);\n          $scope.inputMessage = '';\n        }, function(r){\n\n        });\n      }else{\n        //Do nothing!!!;\n      }\n\n    };\n\n}]);\n\napp.controller('TComposerCtrl', ['$scope', 'UXService', 'AppService',\n  '$mdToast', 'Me', 'Upload', 'apiBase', '$timeout', '$document', '$q',\n  function($scope, UXService, AppService, $mdToast, Me, Upload,\n    apiBase, $timeout, $document, $q) {\n    $scope.selectedCategories = [];\n    $scope.files = [];\n    $scope.newPost = {\n      creating: false\n    };\n\n    $timeout(function() {\n      angular.element(document.querySelector('.emoji-wysiwyg-editor')).on(\n        'focus',\n        function() {\n          $scope.composingPost = true;\n          $scope.$digest();\n        });\n    }, 0);\n\n    AppService.getCategories.then(function(cats) {\n      $scope.categories = cats.data;\n\n      var length = $scope.categories.length;\n\n      for (var i = 0; i < length; i++) {\n        if ($scope.categories[i].name == 'General') {\n          $scope.selectedCategories.push($scope.categories[i]);\n          break;\n        }\n      }\n    });\n\n    $scope.toggleCatPopup = function() {\n\n      $scope.showSelectCatPopup = !$scope.showSelectCatPopup;\n    };\n\n    $scope.catsClick = function(category) {\n      var idx = $scope.selectedCategories.indexOf(category);\n      if (idx > -1) $scope.selectedCategories.splice(idx, 1);\n      else $scope.selectedCategories.push(category);\n    };\n\n    $scope.catsExists = function(category) {\n      if (category.name == 'General' && $scope.categories.length === 0) {\n        return true;\n      } else {\n        return $scope.selectedCategories.indexOf(category) > -1;\n\n      }\n    };\n\n\n    var isUploadFinished = function() {\n      finished = true;\n\n      angular.forEach($scope.files, function(file, key) {\n        if (file.complete !== true) {\n          finished = false;\n        }\n\n      });\n      return finished;\n    };\n\n    $scope.removePicture = function(i) {\n\n      $scope.files.splice(i, 1);\n    };\n\n    var uploadImages = function(files) {\n      var d = $q.defer();\n      var finished = [];\n\n      $scope.files = files;\n\n      var doUpload = function(file) {\n        file.file = file;\n        file.upload = Upload.upload({\n          url: apiBase + '/images',\n          data: {\n            file: file\n          }\n        });\n\n        file.upload.then(function(response) {\n          file.complete = true;\n          file.result = response.data;\n          //console.log(response);\n          finished.push(response.data.image_id);\n\n          if (files.length == finished.length) {\n            d.resolve(finished);\n          }\n        }, function(response) {\n          file.failed = true;\n          if (files.length == finished.length) {\n            d.resolve(finished);\n          }\n        }, function(evt) {\n          file.progress = Math.min(100, parseInt(100.0 *\n            evt.loaded / evt.total));\n        });\n      };\n\n      if (files && files.length) {\n        angular.forEach(files, function(file) {\n          doUpload(file);\n        });\n\n\n      }\n      return d.promise;\n\n    };\n\n    $scope.composePost = function(ev) {\n      //post = \"\";\n      //console.log($scope);\n      post = $scope.post;\n      anonymous = $scope.anonymous;\n\n      if (!post) {\n        post = \" \";\n      }\n\n      if (typeof anonymous === \"undefined\") {\n\n        anonymous = 0;\n      } else if (anonymous.$viewValue === false || anonymous === false) {\n\n        anonymous = 0;\n      } else {\n\n        anonymous = 1;\n      }\n\n      var createPost = function(o) {\n        //console.log(Me.sendPost);\n        $scope.newPost.creating = true;\n\n        var cats = [];\n        var count = $scope.selectedCategories.length;\n        for (var i = 0; i < count; i++) {\n          cats.push($scope.selectedCategories[i].id);\n        }\n\n\n        Me.sendPost({\n          post: o.p,\n          anonymous: o.a,\n          categories: cats,\n          images: o.i\n        }).then(function(r) {\n          $scope.newPost.creating = false;\n\n          if (r.status === 201) {\n            $scope.home.posts.unshift(r.data);\n            //console.log(r.data);\n          }\n\n          $scope.emojiMessage.rawhtml = \"\";\n          $scope.post = \"\";\n          $scope.composingPost = false;\n          $scope.files = [];\n        }, function(r) {\n          $scope.newPost.creating = false;\n        });\n      };\n\n      if ($scope.files.length) {\n        uploadImages($scope.files).then(\n          function(id_arr) {\n            //console.log(id_arr);\n            createPost({\n              p: post.trim(),\n              a: anonymous,\n              i: id_arr\n            });\n          });\n      } else {\n        if (post.trim()) {\n          createPost({\n            p: post.trim(),\n            a: anonymous,\n            i: []\n          });\n        } else {\n          UXService.toast(\"Your post has no content!\");\n        }\n\n      }\n    };\n  }\n]);\n\napp.controller('UXModalLoginCtrl', ['$scope', '$mdDialog', function($scope,\n  $mdDialog) {\n  $scope.hide = function() {\n    $mdDialog.hide();\n  };\n  $scope.cancel = function() {\n    $mdDialog.cancel();\n  };\n  $scope.answer = function(answer) {\n    $mdDialog.hide(answer);\n  };\n}]);\n\napp.controller('UXModalPostCategorizeCtrl', ['$scope', '$mdDialog',\n  'AppService', 'selectedCategories',\n  function($scope, $mdDialog, AppService, selectedCategories) {\n\n    AppService.getCategories.then(function(res) {\n      $scope.categories = res.data;\n      console.log($scope.actives);\n    });\n    $scope.hide = function() {\n      $mdDialog.hide();\n    };\n    $scope.cancel = function() {\n      $mdDialog.cancel();\n    };\n    $scope.filePostIn = function(id) {\n      console.log($scope.selectedCategories);\n\n      $mdDialog.hide(id);\n    };\n  }\n]);\n","app.directive('leftSidenav', [function() {\r\n\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/left-sidenav.html'\r\n    };\r\n}]);\r\n\r\napp.directive('rightSidenav', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/right-sidenav.html'\r\n    };\r\n}]);\r\n\r\napp.directive('searchbox', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/searchbox.html'\r\n    };\r\n}]);\r\n\r\napp.directive('appToolbar', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/app-toolbar.html'\r\n    };\r\n}]);\r\n\r\napp.directive('appToolbarNoLogin', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/app-toolbar-no-login.html'\r\n    };\r\n}]);\r\n\r\napp.directive('testifyPosts', ['PostService', function(PostService) {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/templates/Post/posts.html',\r\n        scope: {\r\n            posts: '=testifyPosts',\r\n            loading: '=loading'\r\n        },\r\n        controller: function($scope) {\r\n            //console.log($scope.posts);\r\n\r\n            this.SDeletePost = function(post_id) {\r\n                PostService.post(post_id).remove().then(function(r) {\r\n                    var i = $scope.posts.map(function(x) {\r\n                            return x.id;\r\n                        })\r\n                        .indexOf(post_id);\r\n                    //console.log($scope);\r\n                    //array.splice(removeIndex, 1);\r\n                    $scope.posts.splice(i, 1);\r\n                    //scope.post = \"\";\r\n                });\r\n\r\n            };\r\n\r\n            $scope.noPosts = false;\r\n\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('testifyPost', ['PostService', 'CommentService', 'Auth', 'UXService', 'Facebook', 'appUrl', '$filter', function(PostService, CommentService, Auth, UXService, Facebook, appUrl, $filter) {\r\n    return {\r\n        restrict: 'A',\r\n        require: \"^?testifyPosts\",\r\n        scope: {\r\n            post: '=testifyPost'\r\n        },\r\n        templateUrl: 'partials/templates/Post/post.html',\r\n        link: function(scope, element, attrs, SuperTPostsCtrl) {\r\n            scope.user = Auth.userProfile;\r\n            scope.CommentsUI = {\r\n                loading: false,\r\n                retryButton: false\r\n            };\r\n\r\n            var actions = {\r\n                'App\\\\Tap': ['tapped into', 'this post'],\r\n                'App\\\\Favorite': ['favorited', 'this post'],\r\n                'App\\\\Amen': ['said amen', 'to this post'],\r\n                'App\\\\Comment': ['commented', 'on this post']\r\n            };\r\n\r\n            if (scope.post.user_ref_activities) {\r\n                if (scope.post.user_ref_activities.length > 0) {\r\n                    interpretation = '';\r\n                    i = 0;\r\n                    var action;\r\n                    var ref_activities = scope.post.user_ref_activities;\r\n                    l = scope.post.user_ref_activities.length;\r\n\r\n                    if (l == 1) {\r\n                        a_t = ref_activities[0].action_type;\r\n                        interpretation += ' ' +\r\n                            actions[a_t][0] +\r\n                            ' ' + actions[a_t][1];\r\n                    } else if (l == 2) {\r\n\r\n                        for (action in ref_activities) {\r\n                            i++;\r\n                            a_t = ref_activities[action].action_type;\r\n\r\n                            if (i == l - 1) {\r\n                                interpretation += ' ' + actions[a_t][0];\r\n                            }\r\n\r\n                            if (i == l) {\r\n                                interpretation += ' and ' + actions[a_t][0] + ' ' + actions[a_t][1];\r\n                            }\r\n                        }\r\n                    } else if (l > 2) {\r\n                        for (action in ref_activities) {\r\n                            i++;\r\n                            a_t = ref_activities[action].action_type;\r\n                            if (i == l - (l - 1)) {\r\n                                interpretation += ' ' + actions[a_t][0];\r\n                            } else if (i <= l - 1) {\r\n                                interpretation += ', ' + actions[a_t][0];\r\n                            } else if (l >= i) {\r\n                                interpretation += ' and ' + actions[a_t][0] + ' ' + actions[a_t][1];\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    scope.interpretation = interpretation;\r\n                }\r\n\r\n            }\r\n\r\n            scope.showMore = false;\r\n            var less, more;\r\n            var postWordsCount = scope.post.text.split(' ').length;\r\n            more = $filter('colonToSmiley')(scope.post.text);\r\n            if(postWordsCount > 60){\r\n              var all_array = scope.post.text.split(' ');\r\n              less = all_array.slice(0, 60 - 1).join(' ') + '...';\r\n              less = $filter('colonToSmiley')(less);\r\n              scope.optimizedText = less;\r\n              scope.post_truncate = true;\r\n            }else{\r\n              scope.optimizedText = more;\r\n            }\r\n\r\n            scope.toggleMore = function () {\r\n              if(scope.showMore){\r\n                scope.optimizedText = less;\r\n              }else{\r\n                scope.optimizedText = more;\r\n              }\r\n              scope.showMore = !scope.showMore;\r\n            };\r\n\r\n\r\n            var originatorEv;\r\n            scope.openMenu = function($mdOpenMenu, ev) {\r\n                originatorEv = ev;\r\n                $mdOpenMenu(ev);\r\n                //console.log(ev)\r\n            };\r\n            if(scope.post.prayer){\r\n              scope.amens_count = $filter('socialCounter')(scope.post.amens_count);\r\n            }\r\n            scope.taps_count = $filter('socialCounter')(scope.post.taps_count);\r\n            scope.comments_count = $filter('socialCounter')(scope.post.comments_count);\r\n\r\n            scope.showCommentBox = false;\r\n            scope.openCommentBox = function() {\r\n                //console.log(scope.post.post_id);\r\n                scope.CommentsUI.loading = true;\r\n                scope.CommentsUI.retryButton = false;\r\n                PostService.post(scope.post.id).getList('comments').then(function(r) {\r\n                    //console.log(r);\r\n                    scope.post.comments = r.data;\r\n                    scope.CommentsUI.loading = false;\r\n                }, function(r) {\r\n                    scope.CommentsUI.retryButton = true;\r\n                    scope.CommentsUI.loading = false;\r\n                });\r\n\r\n                scope.showCommentBox = true;\r\n            };\r\n\r\n            scope.addComment = function(ev) {\r\n                var doCommentPost = function() {\r\n                    //console.log(Date());\r\n                    if (scope.commentBox) {\r\n                        PostService.post(scope.post.id).post('comments', {\r\n                            text: scope.commentBox\r\n                        }).then(function(r) {\r\n                            scope.post.comments_count++;\r\n                            scope.comments_count = $filter('socialCounter')(scope.post.comments_count);\r\n                            scope.post.comments.unshift(r.data);\r\n                            scope.commentBox = \"\";\r\n                        }, function(r){\r\n                            UXService.toast('Sorry, couldn\\'t post your comment check your network and try again ');\r\n                        });\r\n                    }\r\n                };\r\n                if (Auth.userProfile.authenticated) {\r\n                    doCommentPost();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doCommentPost();\r\n                    }, function() {\r\n                        UXService.toast('Sorry, we couldn\\'t sign you check your network and try again');\r\n                    });\r\n                }\r\n            };\r\n\r\n            scope.deleteComment = function(comment_id) {\r\n                var comment = CommentService.comment(comment_id);\r\n                comment.remove().then(function(r) {\r\n                    //console.log(r);\r\n                    var i = scope.post.comments.map(function(x) {\r\n                            return x.id;\r\n                        })\r\n                        .indexOf(comment_id);\r\n                    //console.log($scope);\r\n                    //array.splice(removeIndex, 1);\r\n                    scope.post.comments.splice(i, 1);\r\n                    scope.post.comments_count--;\r\n                    scope.comments_count = $filter('socialCounter')(scope.post.comments_count);\r\n\r\n                    //scope.post = \"\";\r\n\r\n                });\r\n            };\r\n\r\n            scope.toggleFavorite = function(ev) {\r\n                //console.log(scope.post.post_id)\r\n                var doFavorite = function() {\r\n                    if (scope.post.favorited) {\r\n                        scope.post.favorited = false;\r\n                        scope.post.favorites_count--;\r\n                        PostService.post(scope.post.id).one('favorites').remove().then(function(r) {\r\n                            //console.log(r);\r\n                            scope.post.favorited = r.data.status;\r\n                            scope.post.favorites_count = r.data.count;\r\n                        });\r\n                    } else {\r\n                        scope.post.favorited = true;\r\n                        scope.post.favorites_count++;\r\n                        PostService.post(scope.post.id).one('favorites').post().then(function(r) {\r\n                            //console.log(\"created\");\r\n                            scope.post.favorited = r.data.status;\r\n                            scope.post.favorites_count = r.data.count;\r\n                        });\r\n                    }\r\n                };\r\n                if (Auth.userProfile.authenticated) {\r\n                    doFavorite();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doFavorite();\r\n                    });\r\n\r\n                }\r\n                //console.log(scope.post);\r\n            };\r\n\r\n            scope.toggleTap = function(ev) {\r\n                //console.log(scope.post.post_id)\r\n                var doTap = function() {\r\n                    if (scope.post.tapped_into) {\r\n                        scope.post.tapped_into = false;\r\n                        scope.post.taps_count--;\r\n                        PostService.post(scope.post.id).one('taps').remove().then(function(r) {\r\n                            //console.log(r);\r\n                            scope.post.tapped_into = r.data.status;\r\n                            scope.post.taps_count = r.data.count;\r\n                            scope.taps_count = $filter('socialCounter')(scope.post.taps_count);\r\n                        });\r\n                    } else {\r\n                        scope.post.tapped_into = true;\r\n                        scope.post.taps_count++;\r\n                        PostService.post(scope.post.id).one('taps').post().then(function(r) {\r\n                            //console.log(\"created\");\r\n                            scope.post.tapped_into = r.data.status;\r\n                            scope.post.taps_count = r.data.count;\r\n                            scope.taps_count = $filter('socialCounter')(scope.post.taps_count);\r\n                        });\r\n                    }\r\n                };\r\n\r\n                if (Auth.userProfile.authenticated) {\r\n                    doTap();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doTap();\r\n                    });\r\n                }\r\n                //console.log(scope.post);\r\n            };\r\n\r\n            scope.sayAmen = function(ev) {\r\n                //console.log(scope.post.post_id)\r\n                var doSayAmen = function() {\r\n\r\n                    scope.post.amen = true;\r\n                    scope.post.amens_count++;\r\n                    PostService.post(scope.post.id).one('amens').post().then(function(r) {\r\n                        scope.post.amen = r.data.status;\r\n                        scope.post.amens_count = r.data.count;\r\n                        scope.amens_count = $filter('socialCounter')(scope.post.amens_count);\r\n                    });\r\n\r\n                };\r\n                if (Auth.userProfile.authenticated) {\r\n                    doSayAmen();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doSayAmen();\r\n                    });\r\n\r\n                }\r\n            };\r\n\r\n            scope.shareToFb = function() {\r\n              var options = {\r\n                method: 'feed',\r\n                link: appUrl,\r\n                picture: appUrl + '/dist/img/testify-fb-share-pic.png',\r\n                name: 'Testify',\r\n                caption: 'Sharing God\\'s goodness',\r\n                description: scope.post.text + ' (Tesfify is a community for sharing your testimonies and engaging with other people\\'s testimonies)'\r\n              };\r\n              if(isCordova){\r\n                $cordovaFacebook.showDialog(options)\r\n                  .then(function(success) {\r\n\r\n                  }, function (error) {});\r\n              }else{\r\n                Facebook.ui(options, function(response) {});\r\n              }\r\n\r\n            };\r\n\r\n            scope.deletePost = function() {\r\n                //scope.post = null;\r\n                SuperTPostsCtrl.SDeletePost(scope.post.id);\r\n\r\n            };\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('myIcon', ['$timeout', function($timeout) {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            icon: \"@\"\r\n        },\r\n        replace: true,\r\n        link: function(scope, e, attrs) {\r\n            //scope.icon = scope.icon;\r\n        },\r\n        template: \"<i class='mdi mdi-{{::icon}}'></i>\"\r\n    };\r\n}]);\r\n\r\napp.directive('testifyComposer', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        templateUrl: 'partials/app/testifyComposer.html',\r\n        //controller: 'TComposerCtrl'\r\n    };\r\n}]);\r\n","app.filter('socialCounter', function() {\r\n    return function(num) {\r\n        out = num;\r\n        if (num) {\r\n            if (num >= 999 && num < 999999) {\r\n                out = Math.round(num / 100) / 10 + \"K\";\r\n            } else if (num >= 999999 && num < 999999999) {\r\n                out = Math.round(num / 100000) / 10 + \"M\";\r\n            } else if (num >= 999999999) {\r\n                out = Math.round(num / 100000000) / 10 + \"B\";\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n});\r\n","app.factory('isCordova', [function(){\n  var cordova = document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1;\n  return cordova;\n}]);\n\napp.factory('AppService', ['Restangular', 'Auth', 'Me', function(Restangular,\n  Auth, Me) {\n\n  var app = {\n    posts: []\n  };\n\n  Auth.refreshProfile().then(function(r) {\n    //Me.callInit();\n    //console.log(\"letsee\");\n  });\n  //console.log(\"appService\");\n\n  var search = Restangular.service('search');\n\n  var getPosts = Restangular.all('posts');\n\n  var getCategories = Restangular.all('categories').getList();\n\n  var getCategoriesWithCount = Restangular.all('categories').getList({\n    count: true\n  });\n\n\n  return {\n    app: app,\n    search: search,\n    getPosts: getPosts,\n    getCategories: getCategories,\n    getCategoriesWithCount: getCategoriesWithCount\n\n  };\n}]);\n\napp.factory('Pusher', ['Auth', function(Auth){\n\n  Pusher.log = function(message) {\n    if (window.console && window.console.log) {\n      window.console.log(message);\n    }\n  };\n\n  var pusher = new Pusher('b5fa9d11972af2e0b8d1', {\n    encrypted: true,\n    authEndpoint: 'api/v1/pusher/auth',\n    auth: {\n      headers: {\n        'Authorization': 'Bearer ' + Auth.rawToken\n      }\n    }\n  });\n\n\n  return pusher;\n}]);\n\napp.factory('FB', ['isCordova', 'Facebook', '$window', function (isCordova, Facebook, $window) {\n\n  if(isCordova){\n    if($window.facebookConnectPlugin){\n      return $window.facebookConnectPlugin;\n    }else {\n      return Facebook;\n    }\n  }else {\n    return Facebook;\n  }\n}]);\n\napp.factory('UXService', ['$mdDialog', '$mdToast', 'Auth', '$q', '$document',\n  function($mdDialog, $mdToast, Auth, $q, $document) {\n\n    var signinModal = function(ev) {\n      var d = $q.defer();\n      $mdDialog.show({\n          controller: 'UXModalLoginCtrl',\n          templateUrl: 'partials/app/ux.signin.modal.html',\n          parent: document.getElementsByClassName(\"dialog-holder\"),\n          targetEvent: ev,\n          clickOutsideToClose: true\n        })\n        .then(function(res) {\n          d.resolve(res);\n        }, function() {\n          d.reject();\n        });\n\n      return d.promise;\n    };\n\n    var alert = function(ev, text) {\n      // Appending dialog to document.body to cover sidenav in docs app\n      // Modal dialogs should fully cover application\n      // to prevent interaction outside of dialog\n      $mdDialog.show(\n        $mdDialog.alert()\n        .parent(angular.element(document.querySelector('body')))\n        .clickOutsideToClose(true)\n        .title(text)\n        //.content(text)\n        .ariaLabel(text)\n        .ok('OK')\n        .targetEvent(ev)\n      );\n    };\n\n    var toast = function(text) {\n      $mdToast.show(\n        $mdToast.simple()\n        .content(text)\n        .position('top left')\n        .parent($document[0].querySelector('body'))\n        .hideDelay(7000)\n      );\n\n    };\n\n    var UXLoginFB = function() {\n      Auth.signinFB().then(function() {\n        $mdDialog.hide(true);\n      }, function() {\n        d = \"Do nothing\";\n      });\n    };\n\n    var UXSubmitLogin = function(loginDetails) {\n      Auth.signin(loginDetails).then(function(r) {\n        $mdDialog.hide(true);\n      }, function(err) {\n        console.log(err);\n        //console.log($scope.loginDetails);\n      });\n    };\n\n\n\n    return {\n\n      signinModal: signinModal,\n      alert: alert,\n      toast: toast,\n      UXLoginFB: UXLoginFB,\n      UXSubmitLogin: UXSubmitLogin\n\n    };\n  }\n]);\n\napp.factory('Auth', ['$http', '$localStorage', 'Restangular', '$q', '$state',\n  '$cordovaFacebook', 'Facebook', 'isCordova',\n  function($http, $localStorage, Restangular, $q, $state, $cordovaFacebook, Facebook, isCordova) {\n    var user = {\n      authenticated: false,\n      id: null,\n      hash_id: null,\n      name: \"Guest\",\n      firstName: \"Guest\",\n      lastName: \"Guest\",\n      sex: null,\n      location: null,\n      email: null,\n      avatar: null,\n      profile: null\n    };\n\n    Restangular.setFullResponse(true);\n\n    function urlBase64Decode(str) {\n      var output = str.replace('-', '+').replace('_', '/');\n      switch (output.length % 4) {\n        case 0:\n          break;\n        case 2:\n          output += '==';\n          break;\n        case 3:\n          output += '=';\n          break;\n        default:\n          throw 'Illegal base64url string!';\n      }\n      return window.atob(output);\n    }\n\n    var rawToken = $localStorage.token;\n\n    function getClaimsFromToken() {\n      var token = $localStorage.token;\n      var claims = {};\n\n      //console.log(token);\n      if (typeof token !== 'undefined') {\n        var encoded = token.split('.')[1];\n        claims = JSON.parse(urlBase64Decode(encoded));\n      }\n\n      return claims;\n    }\n\n    var refreshProfile = function() {\n\n      var d = $q.defer();\n      if (getClaimsFromToken().hash_id && getClaimsFromToken().exp > Date\n        .now() / 1000) {\n        //console.log(\"truthy\");\n        //console.log(getClaimsFromToken().hash_id);\n        //console.log(Date.now() / 1000);\n        //console.log(getClaimsFromToken().exp);\n\n        Restangular.one('users', getClaimsFromToken().hash_id).get({\n          profile: true\n        }).then(\n          function(r) {\n            buildAuthProfile(r.data);\n            d.resolve(true);\n\n            //console.log(getClaimsFromToken().id);\n\n          },\n          function(r) {\n            if (r.status == 404) {\n              resetProfile();\n              //console.log(\"user not found\");\n              logout();\n            }\n            d.resolve(false);\n\n          });\n      } else {\n        //console.log(Date.now() / 1000);\n        //console.log(getClaimsFromToken().exp);\n        //delete $localStorage.token;\n        resetProfile();\n      }\n\n      return d.promise;\n    };\n\n    var buildAuthProfile = function(u) {\n      //console.log(u);\n      user.authenticated = true;\n      user.id = u.id;\n      user.hash_id = u.hash_id;\n      user.name = u.first_name + ' ' + u.last_name;\n      user.firstName = u.first_name;\n      user.lastName = u.last_name;\n      user.username = u.username;\n      user.location = u.location;\n      user.email = u.email;\n      user.avatar = u.avatar;\n      user.profile = u.profile;\n    };\n\n    var saveToken = function(token) {\n\n      $localStorage.token = token;\n      user.token = token;\n    };\n\n    var signup = function(newUser) {\n      var d = $q.defer();\n\n      Restangular.service('signup').post(newUser).then(function(r) {\n        //console.log(r);\n        saveToken(r.data.token);\n        refreshProfile(); //Refresh session data here\n        //$scope.refreshProfile();\n        $state.go('web.app.dashboard.home');\n        d.resolve(r.data.token);\n      }, function() {\n        d.reject();\n      });\n\n      return d.promise;\n    };\n\n    var signin = function(l) {\n      var d = $q.defer();\n\n      Restangular.service('authenticate').post(l).then(function(r) {\n        //console.log(r);\n        saveToken(r.data.token);\n        refreshProfile(); //Refresh session data here\n        //$scope.refreshProfile();\n        $state.go('web.app.dashboard.home');\n        d.resolve(r.data.token);\n      }, function() {\n        d.reject();\n      });\n\n      return d.promise;\n    };\n\n    var signinFB = function() {\n      //console.log(\"loginctrl\");\n      var d = $q.defer();\n\n      var doFbLogin = function(fb_response) {\n        //console.log('called');\n        var d = $q.defer();\n        r = fb_response;\n        if (r.status === 'connected') {\n          json = {\n            \"fb_access_token\": r.authResponse.accessToken\n          };\n          Restangular.service('fb-token').post(json).then(function(r) {\n            saveToken(r.data.token);\n            refreshProfile(); //Refresh session data here\n            //console.log(r);\n            d.resolve(r);\n          }, function(r) {\n            d.reject(r);\n          });\n        } else {\n          //console.log('reject');\n          d.reject();\n\n        }\n        return d.promise;\n      };\n\n      if(isCordova){\n        $cordovaFacebook.login(['public_profile', 'email']).then(function(r) {\n          console.log(r);\n          doFbLogin(r).then(function() {\n            d.resolve();\n          }, function(r) {\n            d.reject(r);\n          });\n        }, function(){\n          d.reject();\n        });\n      }else{\n        Facebook.login(function(r) {\n          //console.log(r);\n          doFbLogin(r).then(function() {\n            d.resolve();\n          }, function(r) {\n            d.reject(r);\n          });\n        });\n      }\n\n      return d.promise;\n    };\n\n    var logout = function() {\n      tokenClaims = {};\n      delete $localStorage.token;\n      refreshProfile();\n      $state.go('web.app.login');\n    };\n\n    var resetProfile = function() {\n      user.authenticated = false;\n      user.id = null;\n      user.hash_id = null;\n      user.name = \"Guest\";\n      user.firstName = \"Guest\";\n      user.lastName = \"Guest\";\n      user.sex = null;\n      user.location = null;\n      user.email = null;\n      user.avatar = null;\n    };\n\n    return {\n      signup: signup,\n      signin: signin,\n      signinFB: signinFB,\n      logout: logout,\n      refreshProfile: refreshProfile,\n      resetProfile: resetProfile,\n      userProfile: user,\n      token: getClaimsFromToken(),\n      rawToken: rawToken\n    };\n  }\n]);\n\napp.factory('Me', ['Auth', 'Restangular', '$q', function(Auth, Restangular, $q) {\n\n  var uid = Auth.token.sub;\n  //console.log(uid);\n\n  var me = Restangular.one('users', uid);\n\n  var sendPost = function(o) {\n    return Restangular.all('posts').post({\n      \"post\": o.post,\n      \"anonymous\": o.anonymous,\n      \"categories\": o.categories,\n      \"images\": o.images\n    });\n  };\n\n  return {\n    id: uid,\n    me: me,\n    authenticated: Auth.userProfile.authenticated,\n    favorites: me.all('favorites'),\n    profile: Auth.userProfile,\n    sendPost: sendPost\n\n  };\n}]);\n\napp.factory('PostService', ['Restangular', '$q', function(Restangular, $q) {\n\n  var posts = Restangular.all('posts');\n\n  var post = function(id) {\n    return Restangular.one('posts', id);\n  };\n\n  return {\n    post: post\n  };\n\n}]);\n\napp.factory('CommentService', ['Restangular', '$q', function(Restangular, $q) {\n\n  var posts = Restangular.all('comments');\n\n  var comment = function(id) {\n    return Restangular.one('comments', id);\n  };\n\n  return {\n    comment: comment\n  };\n\n}]);\n\napp.factory('SocialService', ['Facebook', 'Auth', function(Facebook, Auth) {\n\n\n  return {\n\n  };\n}]);\n"],"sourceRoot":"/source/"}