{"version":3,"sources":["app.js","controllers/appCtrl.js","controllers/controllers.js","directives/directives.js","filters/filters.js","services/services.js"],"names":["app","angular","module","cordova","document","URL","indexOf","constant","config","$compileProvider","debugInfoEnabled","FacebookProvider","$httpProvider","RestangularProvider","apiBase","setAppId","setBaseUrl","interceptors","push","$q","$location","$localStorage","$rootScope","Auth","request","headers","token","Authorization","response","t","replace","responseError","status","data","error","resetProfile","path","console","log","reject","run","FastClick","attach","body","$mdThemingProvider","myPaletteMap","extendPalette","contrastDefaultColor","contrastDarkColors","contrastLightColors","500","50","100","200","300","400","600","700","definePalette","theme","primaryPalette","default","hue-1","hue-2","hue-3","accentPalette","warnPalette","backgroundPalette","dark","$stateProvider","$urlRouterProvider","$locationProvider","appBase","state","abstract","templateUrl","url","controller","template","resolve","profile","$stateParams","Restangular","one","id","get","views","","@web.app.dashboard.user","@web.app.dashboard","otherwise","html5Mode","enabled","requireBase","$scope","$mdSidenav","$mdMedia","$state","AppService","Me","location","user","userProfile","composingPost","tokHashId","hash_id","ui","showSearch","showSideNav","toggleNav","which","toggle","toggleSearchBox","getCategoriesWithCount","then","cats","categories","originatorEv","openMenu","$mdOpenMenu","ev","logout","redirect","go","menu","link","title","icon","condition","click","menuAuth","action","getSearchResultIcon","type","searchIcons","tag","searchRepo","query","d","defer","search","getList","q","plain","promise","UXService","$document","post_status","loading","loadPosts","load","param","getPosts","r","posts","err","toast","cat","category","Facebook","authenticated","fb_button","getLoginStatus","api","fb_logged_in","fb_name","name","loginFB","signinFB","UXLoginFB","UXSubmitLogin","loginDetails","submitLogin","signin","$mdDialog","refresh","newUser","signupFb","login","fields","show","alert","parent","element","querySelector","clickOutsideToClose","ariaLabel","ok","submitForm","signupForm","$valid","signup","user_profile","activities","favorites","taps","loadUserProfile","loadUserPosts","all","loadUserFavorites","loadUserTaps","Upload","username","saveAccountInfo","obj","post","first_name","last_name","section_account","saveAboutInfo","favorite_book","favorite_verse","favorite_parable","denomination","section_about_me","uploadAvatar","file","uploading","upload","dataUrltoBlob","avatar","picFile","dataUrl","$timeout","result","errorMsg","evt","progress","parseInt","loaded","total","changePassword","password","newPassword","newPassword1","resp","$mdToast","selectedCategories","files","newPost","creating","on","$digest","getCategories","length","i","toggleCatPopup","showSelectCatPopup","catsClick","idx","splice","catsExists","removePicture","uploadImages","finished","doUpload","complete","image_id","failed","Math","min","forEach","composePost","anonymous","$viewValue","createPost","o","count","sendPost","p","a","images","unshift","emojiMessage","rawhtml","id_arr","trim","hide","cancel","answer","res","actives","filePostIn","directive","restrict","transclude","PostService","scope","this","SDeletePost","post_id","remove","map","x","noPosts","CommentService","appUrl","require","attrs","SuperTPostsCtrl","CommentsUI","actions","App\\Tap","App\\Favorite","App\\Amen","App\\Comment","user_ref_activities","interpretation","ref_activities","l","a_t","action_type","showCommentBox","openCommentBox","comments","addComment","doCommentPost","commentBox","text","comments_count","signinModal","v","deleteComment","comment_id","comment","toggleFavorite","doFavorite","favorited","favorites_count","toggleTap","doTap","tapped_into","taps_count","sayAmen","doSayAmen","amen","amens_count","shareToFb","method","picture","caption","description","deletePost","e","filter","num","out","round","factory","refreshProfile","service","$http","urlBase64Decode","str","output","window","atob","getClaimsFromToken","claims","encoded","split","JSON","parse","firstName","lastName","sex","email","setFullResponse","exp","Date","now","buildAuthProfile","u","saveToken","doFbLogin","fb_response","json","fb_access_token","authResponse","accessToken","tokenClaims","uid","sub","me","getElementsByClassName","targetEvent","simple","content","position","hideDelay"],"mappings":"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","file":"app.js","sourcesContent":["//\"use strict\";\n\nvar app = angular.module('testify', ['ngMaterial',\n  'chieffancypants.loadingBar',\n  'ngAnimate',\n  'ngMessages',\n  'angularMoment',\n  'ui.router',\n  'ngStorage',\n  'restangular',\n  'facebook',\n  'ngFileUpload',\n  'ngImgCrop',\n  'ngTextTruncate',\n  'emojiApp'\n]);\n\nvar cordova = document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1;\nif ( cordova ) {\n  app.constant('apiBase', \"https://testify-staging.herokuapp.com/api/v1\");\n  app.constant('appBase', \"/\");\n  app.constant('appUrl', \"https://testify-staging.herokuapp.com\");\n\n} else {\n\n  app.constant('appUrl', \"https://testify-staging.herokuapp.com\");\n  app.constant('appBase', \"/\");\n  app.constant('apiBase', \"api/v1\");\n}\n\n//app.constant('apiBase', \"http://localhost/testify/api\");\n//app.constant('apiBase', \"https://testify-for-testimonies.herokuapp.com/api\");\napp.config(['$compileProvider', function ($compileProvider) {\n  $compileProvider.debugInfoEnabled(false);\n}]);\napp.config(function(FacebookProvider, $httpProvider, RestangularProvider,\n  apiBase) {\n  FacebookProvider.setAppId(180042792329807);\n  RestangularProvider.setBaseUrl(apiBase);\n\n  $httpProvider.interceptors.push(['$q', '$location', '$localStorage',\n    function($q, $location, $localStorage, $rootScope, Auth) {\n      return {\n        'request': function(config) {\n          config.headers = config.headers || {};\n          if ($localStorage.token) {\n            config.headers.Authorization = 'Bearer ' + $localStorage.token;\n          }\n          return config;\n        },\n        'response': function(response) {\n          var t = response.headers('Authorization');\n          if (t) {\n            t.replace('Bearer ', '');\n            $localStorage.token = t;\n            //console.log(t);\n          }\n\n          return response;\n        },\n        'responseError': function(response) {\n          if (response.status === 401 || response.status === 400 ||\n            response.status === 403) {\n            if (response.data.error == 'token_expired') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            } else if (response.data.error == 'token_invalid') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            } else if (response.data.error == 'Bad Authorization') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            } else if (response.data.error == 'token_not_provided') {\n              delete $localStorage.token;\n              Auth.resetProfile();\n              $location.path('/signin');\n            }\n\n\n\n            console.log(\"Unauthorized or forbidden\");\n\n          }\n          return $q.reject(response);\n        }\n      };\n    }\n  ]);\n});\n\napp.run(function() {\n  if (cordova){\n    FastClick.attach(document.body);\n  }\n});\n\napp.config(function($mdThemingProvider) {\n  var myPaletteMap = $mdThemingProvider.extendPalette('blue', {\n\n    'contrastDefaultColor': 'light',\n    'contrastDarkColors': '200, 300',\n    'contrastLightColors': '500',\n    '500': '97B6CA',\n    '50': '1C3456',\n    '100': '5DADE0',\n    '200': 'e74c3c',\n    '300': 'FFFFFF',\n    '400': 'F4F4F4',\n    '600': '27ae60',\n    '700': '77777E'\n  });\n  $mdThemingProvider.definePalette('palette', myPaletteMap);\n  //console.log(myPaletteMap);\n  $mdThemingProvider.theme('default')\n    .primaryPalette('palette', {\n      'default': '500',\n      'hue-1': '50',\n      'hue-2': '100',\n      'hue-3': '300',\n    })\n    .accentPalette('palette', {\n      'default': '200',\n      'hue-1': '600',\n      'hue-2': '700'\n\n    })\n    .warnPalette('red', {\n\n    });\n\n  $mdThemingProvider.theme('input', 'default')\n    .primaryPalette('grey', {\n\n    })\n    .backgroundPalette('palette', {\n      'default': '500'\n    }).dark();\n\n  $mdThemingProvider.theme('search', 'default')\n    .primaryPalette('yellow', {\n\n    })\n    .backgroundPalette('palette', {\n      'default': '50'\n    }).dark();\n\n  ///$mdIconProvider.defaultFontSet(\"mdi\", \"mdi-\");\n});\n\napp.config(function($stateProvider, $urlRouterProvider, $locationProvider,\n  appBase) {\n  $stateProvider\n    .state('web', {\n      //url: appBase,\n      abstract: true,\n      templateUrl: 'views/web.html'\n    }).state('web.app', {\n      abstract: true,\n      url: appBase,\n      templateUrl: 'views/web.app.html'\n    }).state('web.app.login', {\n      url: 'login',\n      templateUrl: 'views/web.app.login.html',\n    }).state('web.app.signup', {\n      url: 'signup',\n      controller: 'LoginCtrl',\n      templateUrl: 'views/web.app.signup.html'\n    }).state('web.app.logout', {\n      url: 'logout',\n      controller: 'LogoutCtrl',\n      template: \" \"\n    }).state('web.app.landing', {\n      url: '',\n      templateUrl: 'views/web.app.landing.html',\n    }).state('web.app.forgot', {\n      url: 'forgot',\n      templateUrl: 'views/web.app.forgot-password.html',\n    }).state('web.app.dashboard', {\n      abstract: true,\n      url: '',\n      templateUrl: 'views/web.app.dashboard.html',\n    }).state('web.app.dashboard.home', {\n      url: 'home',\n      templateUrl: 'views/web.app.dashboard.home.html'\n    }).state('web.app.dashboard.messages', {\n      url: 'messages',\n      templateUrl: 'views/web.app.dashboard.messages.html'\n    }).state('web.app.dashboard.post', {\n      url: 'post/:hash_id',\n      templateUrl: 'views/web.app.dashboard.post.html'\n    }).state('web.app.dashboard.posts', {\n      url: 'posts?cat',\n      templateUrl: 'views/web.app.dashboard.home.html'\n    }).state('web.app.dashboard.user', {\n      url: 'user/:id',\n      resolve: {\n        profile: function($stateParams, Restangular) {\n          return Restangular.one('users', $stateParams.id).get();\n        }\n      },\n      views: {\n        '': {\n          templateUrl: \"views/web.app.dashboard.profile.html\",\n          controller: 'ProfileCtrl',\n        },\n        '@web.app.dashboard.user': {\n          templateUrl: 'views/web.app.dashboard.profile.activities.html',\n        }\n      }\n    }).state('web.app.dashboard.user.activities', {\n      url: '/activities',\n      templateUrl: 'views/web.app.dashboard.profile.activities.html',\n    }).state('web.app.dashboard.user.favorites', {\n      url: '/favorites',\n      templateUrl: 'views/web.app.dashboard.profile.favorites.html',\n    }).state('web.app.dashboard.user.taps', {\n      url: '/taps',\n      templateUrl: 'views/web.app.dashboard.profile.taps.html',\n    }).state('web.app.dashboard.user.edit', {\n      url: '/edit',\n      views: {\n        '@web.app.dashboard': {\n          templateUrl: 'views/web.app.dashboard.profile.edit.html'\n\n        }\n      }\n    });\n\n  $urlRouterProvider.otherwise(appBase + \"home\");\n\n  if ( cordova ) {\n\n  } else {\n    $locationProvider.html5Mode({\n      enabled: true,\n      requireBase: false\n    });\n  }\n\n});\n","app.controller('AppCtrl', function($rootScope, $scope, $mdSidenav, $mdMedia,\n  $location, $state, $q, AppService, Auth, Me, appBase) {\n  $scope.location = $location;\n  $scope.user = Auth.userProfile;\n  $scope.composingPost = false;\n  $scope.tokHashId = Auth.token.hash_id;\n  //$state.go('web.app.login');\n\n  $scope.ui = {\n    showSearch: false,\n    showSideNav: $state,\n    toggleNav: function(which) {\n      $mdSidenav(which).toggle();\n      //console.log(which);\n    },\n    toggleSearchBox: function() {\n      $scope.ui.showSearch = !$scope.ui.showSearch;\n    }\n  };\n  //console.log($state);\n  //$scope.ui.showSideNav = $state.current.data.showSideNav;\n  //console.log($scope.tokHashId);\n\n  AppService.getCategoriesWithCount.then(function(cats) {\n\n    $scope.categories = cats.data;\n  });\n\n\n  var originatorEv;\n  $scope.openMenu = function($mdOpenMenu, ev) {\n    originatorEv = ev;\n    $mdOpenMenu(ev);\n    //console.log(ev)\n  };\n\n  $scope.logout = function() {\n    Auth.logout();\n    //Me.callInit();\n    //console.log($scope.user);\n  };\n\n  $scope.redirect = function(state) {\n    $state.go(state);\n  };\n\n  $scope.menu = [{\n    link: '',\n    state: 'web.app.dashboard.home',\n    title: 'Feeds',\n    icon: 'home',\n    condition: true,\n    click: ''\n  }];\n\n  $scope.menuAuth = [{\n    link: 'profile',\n    state: \"web.app.dashboard.user({id: user.username || user.hash_id})\",\n    title: 'Profile',\n    icon: 'account',\n    condition: 'user.authenticated',\n    action: null\n  }, {\n    link: '',\n    state: 'web.app.dashboard.messages',\n    title: 'Messages',\n    icon: 'message-text-outline',\n    condition: 'user.authenticated',\n    click: ''\n  }, {\n    link: '',\n    state: \"web.app.dashboard.user.favorites({id: user.username || user.hash_id})\",\n    title: 'Favourites',\n    icon: 'star',\n    condition: 'user.authenticated',\n    action: null\n  }, {\n    link: '',\n    state: \"web.app.dashboard.user.edit({id: user.username || user.hash_id})\",\n    title: 'Preferences',\n    icon: 'settings',\n    condition: 'user.authenticated',\n    action: null\n  }];\n\n\n\n  $scope.getSearchResultIcon = function(type) {\n    //console.log(icon[type]);\n    return icon[type];\n  };\n\n  $scope.searchIcons = {\n    \"tag\": \"pound\",\n    \"user\": \"at\"\n  };\n\n\n\n  $scope.searchRepo = function(query) {\n    var d = $q.defer();\n    AppService.search.getList({\n      q: query\n    }).then(function(response) {\n      d.resolve(response.data.plain());\n      //console.log(response.data.plain());\n      //return result;\n    }, function() {\n      d.reject();\n    });\n\n    return d.promise;\n  };\n\n});\n","app.controller('PostsCtrl', ['AppService', 'Me', '$scope', '$state',\n  '$stateParams', 'Restangular', 'UXService', '$document',\n  function(AppService, Me, $scope, $state, $stateParams, Restangular,\n    UXService, $document) {\n    $scope.app = AppService.app; //Post.getList();\n    $scope.post_status = {\n      loading: false\n    };\n    var loadPosts = function() {\n      var param = null;\n      $scope.post_status.loading = true;\n\n      if ($stateParams.cat) {\n        load({\n          category: $stateParams.cat\n        });\n      } else {\n        load({});\n      }\n\n\n      function load(param) {\n\n        AppService.getPosts.getList(param).then(function(r) {\n          //console.log(AppService.app);\n          AppService.app.posts = r.data;\n          /*l = r.data.length;\n          for (i = 0; i < l; i++) {\n              AppService.app.posts.unshift(r.data[i]);\n          }*/\n\n          $scope.post_status.loading = false;\n          //console.log(r.data.plain());\n        }, function(err) {\n          $scope.post_status.loading = false;\n          //console.log(err);\n          UXService.toast(\"Something's wrong\");\n        });\n      }\n    };\n\n    loadPosts();\n\n\n\n  }\n]);\n\napp.controller('LoginCtrl', ['$scope', 'UXService', 'Facebook', '$q', '$state',\n  'Auth', 'Me', 'appBase',\n  function($scope, UXService, Facebook, $q, $state, Auth, Me, appBase) {\n\n    if (Auth.userProfile.authenticated === true) {\n      $state.go('web.app.dashboard.home');\n    }\n\n    $scope.fb_button = \"Login with Facebook\";\n\n    Facebook.getLoginStatus(function(r) {\n      //console.log(r);\n      if (r.status === 'connected') {\n        //console.log(r);\n        Facebook.api('/me', function(r) {\n          $scope.fb_logged_in = true;\n          $scope.fb_name = r.name;\n          $scope.fb_button = \"Continue as \" + $scope.fb_name;\n        });\n        //console.log(r);\n      } else {\n        //console.log(\"false;\");\n        $scope.fb_logged_in = false;\n        $scope.fb_name = \"null\";\n        $scope.fb_button = \"Login with Facebook\";\n      }\n    });\n\n    $scope.loginFB = function() {\n      Auth.signinFB().then(function() {\n        $state.go('web.app.dashboard.home');\n      }, function(r) {\n        UXService.toast(r.data.error);\n      });\n    };\n\n    $scope.UXLoginFB = function() {\n      UXService.UXLoginFB();\n    };\n\n    $scope.UXSubmitLogin = function() {\n      UXService.UXSubmitLogin($scope.loginDetails);\n    };\n\n    var refresh = function() {\n      Facebook.api(\"/me\", {\n        fields: 'id,name,email,access_token'\n      }).then(\n        function(response) {\n          $scope.welcomeMsg = \"Welcome \" + response.name;\n          console.log(response);\n          //console.log(JSON.stringify(response));\n        },\n        function(err) {\n          $scope.welcomeMsg = \"Please log in\";\n        });\n    };\n\n    $scope.submitLogin = function() {\n      Auth.signin($scope.loginDetails).then(function(r) {\n        //console.log($scope.user);\n        $state.go('web.app.dashboard.home');\n        //Me.callInit();\n        //Success Login\n      }, function(err) {\n        UXService.toast('Wrong username or password');\n      });\n    };\n\n  }\n]);\n\napp.controller('SignupCtrl', ['$scope', 'Facebook', 'Auth', '$location',\n  '$mdDialog', '$state',\n  function($scope, Facebook, Auth, $location, $mdDialog, $state) {\n    var refresh;\n\n    $scope.newUser = {};\n    $scope.signupFb = function() {\n      Facebook.login().then(function() {\n        refresh();\n      });\n    };\n\n    refresh = function() {\n      Facebook.api(\"/me\", {\n        fields: 'id,first_name,last_name,email'\n      }).then(\n        function(response) {\n          Facebook.logout();\n          //$scope.welcomeMsg = \"Welcome \" + response.name;\n          //console.log(response);\n          //console.log(JSON.stringify(response));\n          //Auth.BuildSession(name, id, lastname for appctrl scope);\n          //$location.path('/');\n        },\n        function(err) {\n          $mdDialog.show(\n            $mdDialog.alert()\n            .parent(angular.element(document.querySelector('body')))\n            .clickOutsideToClose(true)\n            .title('Login failed!')\n            //.content('Login failed')\n            .ariaLabel('Failed login')\n            .ok('close')\n            //.targetEvent(ev)\n          );\n\n          //$scope.welcomeMsg = \"Please log in\";\n        });\n    };\n\n    $scope.submitForm = function() {\n      //console.log($scope.newUser);\n      //console.log($scope.signupForm.$valid);\n      if ($scope.signupForm.$valid) {\n        Auth.signup($scope.newUser).then(\n          function(r) {\n\n            $state.go('web.app.dashboard.home');\n            //console.log(r);\n          },\n          function(r) {\n            //console.log(r);\n          });\n      }\n    };\n\n  }\n]);\n\napp.controller('LogoutCtrl', ['$scope', 'Auth', 'Me', function($scope, Auth, Me) {\n  Auth.logout();\n  //$scope.logout();\n  console.log(\"mayama\");\n}]);\n\napp.controller('ProfileCtrl', ['Restangular', '$scope', '$stateParams',\n  '$state',\n  function(Restangular, $scope, $stateParams, $state) {\n    //console.log(profile);\n    var user_profile = Restangular.one('users', $stateParams.id);\n\n    $scope.user = {\n      profile: {},\n      activities: [],\n      favorites: [],\n      taps: []\n    };\n\n\n    var loadUserProfile = function() {\n      Restangular.one('users', $stateParams.id).one('profile').get().then(function(r){\n        $scope.user_profile = r.data;\n      });\n    };\n\n    var loadUserPosts = function() {\n      user_profile.all('activities').getList().then(function(r) {\n        $scope.user.activities = r.data;\n      });\n    };\n\n    var loadUserFavorites = function() {\n      user_profile.all('favorites').getList().then(function(r) {\n        $scope.user.favorites = r.data;\n      });\n    };\n\n    var loadUserTaps = function() {\n      user_profile.all('taps').getList().then(function(r) {\n        $scope.user.taps = r.data;\n      });\n    };\n\n    loadUserProfile();\n    loadUserPosts();\n    loadUserFavorites();\n    loadUserTaps();\n\n\n  }\n]);\n\napp.controller('ProfileEditCtrl', ['Restangular', '$scope', '$stateParams',\n  '$state', 'Upload', 'Auth', 'UXService', 'apiBase',\n  function(Restangular, $scope, $stateParams, $state, Upload, Auth,\n    UXService, apiBase) {\n    //console.log(profile);\n    Restangular.one('users', $stateParams.id).one(\n      'profile').get({\n      'profile': true\n    }).then(\n      function(r) {\n        $scope.user_profile = r.data;\n      }\n    );\n    $scope.user = Auth.userProfile;\n\n    if (!(Auth.userProfile.hash_id == $stateParams.id || Auth.userProfile.username ==\n        $stateParams.id)) {\n      console.log($stateParams);\n      $state.go('web.app.dashboard.home');\n    }\n\n    $scope.saveAccountInfo = function(obj) {\n      Restangular.one('users', $scope.user.hash_id).one('profile').post(\n        '', obj).then(function(r) {\n        Auth.userProfile.first_name = obj.first_name;\n        Auth.userProfile.last_name = obj.last_name;\n        Auth.userProfile.username = obj.username;\n\n        $scope.section_account = false;\n      });\n\n    };\n\n    $scope.saveAboutInfo = function(obj) {\n      Restangular.one('users', $scope.user.hash_id).one('profile').post(\n        '', obj);\n      Auth.userProfile.location = obj.location;\n      if(Auth.userProfile.profile === null){\n        Auth.userProfile.profile = {};\n      }\n      Auth.userProfile.profile.favorite_book = obj.favorite_book;\n      Auth.userProfile.profile.favorite_verse = obj.favorite_verse;\n      Auth.userProfile.profile.favorite_parable = obj.favorite_parable;\n      Auth.userProfile.profile.denomination = obj.denomination;\n\n      $scope.section_about_me = false;\n    };\n\n    $scope.uploadAvatar = function(file) {\n      $scope.uploading = true;\n\n      Upload.upload({\n        url: apiBase + '/users/' + Auth.userProfile.hash_id +\n          '/profile/avatar',\n        data: {\n          file: Upload.dataUrltoBlob(file)\n        }\n\n\n      }).then(function(r) {\n        Auth.userProfile.avatar = r.data.url;\n        UXService.toast('Successfully updated your display picture');\n\n      }, function() {\n        //console.log(file);\n        UXService.toast('Changing display picture wasn\\'t successful');\n      }).finally(function() {\n        $scope.uploading = false;\n        $scope.picFile = '';\n      });\n    };\n\n    $scope.upload = function(dataUrl) {\n      console.log(9);\n      Upload.upload({\n        url: 'https://angular-file-upload-cors-srv.appspot.com/upload',\n        data: {\n          file: Upload.dataUrltoBlob(dataUrl)\n        },\n      }).then(function(response) {\n        $timeout(function() {\n          $scope.result = response.data;\n        });\n      }, function(response) {\n        if (response.status > 0) $scope.errorMsg = response.status +\n          ': ' + response.data;\n      }, function(evt) {\n        $scope.progress = parseInt(100.0 * evt.loaded / evt.total);\n      });\n    };\n\n    $scope.changePassword = function() {\n      if ($scope.password.newPassword &&\n        $scope.password.newPassword1 && $scope.password.newPassword === $scope.password.newPassword1) {\n        Restangular.one('users', $scope.user.hash_id).post('password',\n          $scope.password).then(function(resp) {\n          if (resp.status == 202) {\n            UXService.toast('Successfully changed password');\n          }\n        }, function(resp) {\n          UXService.toast('Something\\'s wrong');\n        });\n      } else {\n        UXService.toast('Please repeat the password');\n      }\n    };\n\n  }\n]);\n\napp.controller('MessagesCtrl', [function() {\n\n}]);\n\napp.controller('TComposerCtrl', ['$scope', 'UXService', 'AppService',\n  '$mdToast', 'Me', 'Upload', 'apiBase', '$timeout', '$document', '$q',\n  function($scope, UXService, AppService, $mdToast, Me, Upload,\n    apiBase, $timeout, $document, $q) {\n    $scope.selectedCategories = [];\n    $scope.files = [];\n    $scope.newPost = {\n      creating: false\n    };\n\n    $timeout(function() {\n      angular.element(document.querySelector('.emoji-wysiwyg-editor')).on(\n        'focus',\n        function() {\n          $scope.composingPost = true;\n          $scope.$digest();\n        });\n    }, 0);\n\n    AppService.getCategories.then(function(cats) {\n      $scope.categories = cats.data;\n\n      var length = $scope.categories.length;\n\n      for (var i = 0; i < length; i++) {\n        if ($scope.categories[i].name == 'General') {\n          $scope.selectedCategories.push($scope.categories[i]);\n          break;\n        }\n      }\n    });\n\n    $scope.toggleCatPopup = function() {\n\n      $scope.showSelectCatPopup = !$scope.showSelectCatPopup;\n    };\n\n    $scope.catsClick = function(category) {\n      var idx = $scope.selectedCategories.indexOf(category);\n      if (idx > -1) $scope.selectedCategories.splice(idx, 1);\n      else $scope.selectedCategories.push(category);\n    };\n\n    $scope.catsExists = function(category) {\n      if (category.name == 'General' && $scope.categories.length === 0) {\n        return true;\n      } else {\n        return $scope.selectedCategories.indexOf(category) > -1;\n\n      }\n    };\n\n\n    var isUploadFinished = function() {\n      finished = true;\n\n      angular.forEach($scope.files, function(file, key) {\n        if (file.complete !== true) {\n          finished = false;\n        }\n\n      });\n      return finished;\n    };\n\n    $scope.removePicture = function(i) {\n\n      $scope.files.splice(i, 1);\n    };\n\n    var uploadImages = function(files) {\n      var d = $q.defer();\n      var finished = [];\n\n      $scope.files = files;\n\n      var doUpload = function(file) {\n        file.file = file;\n        file.upload = Upload.upload({\n          url: apiBase + '/images',\n          data: {\n            file: file\n          }\n        });\n\n        file.upload.then(function(response) {\n          file.complete = true;\n          file.result = response.data;\n          //console.log(response);\n          finished.push(response.data.image_id);\n\n          if (files.length == finished.length) {\n            d.resolve(finished);\n          }\n        }, function(response) {\n          file.failed = true;\n          if (files.length == finished.length) {\n            d.resolve(finished);\n          }\n        }, function(evt) {\n          file.progress = Math.min(100, parseInt(100.0 *\n            evt.loaded / evt.total));\n        });\n      };\n\n      if (files && files.length) {\n        angular.forEach(files, function(file) {\n          doUpload(file);\n        });\n\n\n      }\n      return d.promise;\n\n    };\n\n    $scope.composePost = function(ev) {\n      //post = \"\";\n      //console.log($scope);\n      post = $scope.post;\n      anonymous = $scope.anonymous;\n\n      if (!post) {\n        post = \" \";\n      }\n\n      if (typeof anonymous === \"undefined\") {\n\n        anonymous = 0;\n      } else if (anonymous.$viewValue === false || anonymous === false) {\n\n        anonymous = 0;\n      } else {\n\n        anonymous = 1;\n      }\n\n      var createPost = function(o) {\n        //console.log(Me.sendPost);\n        $scope.newPost.creating = true;\n\n        var cats = [];\n        var count = $scope.selectedCategories.length;\n        for (var i = 0; i < count; i++) {\n          cats.push($scope.selectedCategories[i].id);\n        }\n\n\n        Me.sendPost({\n          post: o.p,\n          anonymous: o.a,\n          categories: cats,\n          images: o.i\n        }).then(function(r) {\n          $scope.newPost.creating = false;\n\n          if (r.status === 201) {\n            $scope.app.posts.unshift(r.data);\n            //console.log(r.data);\n          }\n\n          $scope.emojiMessage.rawhtml = \"\";\n          $scope.post = \"\";\n          $scope.composingPost = false;\n          $scope.files = [];\n        }, function(r) {\n          $scope.newPost.creating = false;\n        });\n      };\n\n      if ($scope.files.length) {\n        uploadImages($scope.files).then(\n          function(id_arr) {\n            //console.log(id_arr);\n            createPost({\n              p: post.trim(),\n              a: anonymous,\n              i: id_arr\n            });\n          });\n      } else {\n        if (post.trim()) {\n          createPost({\n            p: post.trim(),\n            a: anonymous,\n            i: []\n          });\n        } else {\n          UXService.toast(\"Your post has no content!\");\n        }\n\n      }\n    };\n  }\n]);\n\napp.controller('UXModalLoginCtrl', ['$scope', '$mdDialog', function($scope,\n  $mdDialog) {\n  $scope.hide = function() {\n    $mdDialog.hide();\n  };\n  $scope.cancel = function() {\n    $mdDialog.cancel();\n  };\n  $scope.answer = function(answer) {\n    $mdDialog.hide(answer);\n  };\n}]);\n\napp.controller('UXModalPostCategorizeCtrl', ['$scope', '$mdDialog',\n  'AppService', 'selectedCategories',\n  function($scope, $mdDialog, AppService, selectedCategories) {\n\n    AppService.getCategories.then(function(res) {\n      $scope.categories = res.data;\n      console.log($scope.actives);\n    });\n    $scope.hide = function() {\n      $mdDialog.hide();\n    };\n    $scope.cancel = function() {\n      $mdDialog.cancel();\n    };\n    $scope.filePostIn = function(id) {\n      console.log($scope.selectedCategories);\n\n      $mdDialog.hide(id);\n    };\n  }\n]);\n","app.directive('leftSidenav', [function() {\r\n\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/left-sidenav.html'\r\n    };\r\n}]);\r\n\r\napp.directive('rightSidenav', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/right-sidenav.html'\r\n    };\r\n}]);\r\n\r\napp.directive('searchbox', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/searchbox.html'\r\n    };\r\n}]);\r\n\r\napp.directive('appToolbar', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/app-toolbar.html'\r\n    };\r\n}]);\r\n\r\napp.directive('appToolbarNoLogin', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/app/app-toolbar-no-login.html'\r\n    };\r\n}]);\r\n\r\napp.directive('testifyPosts', ['PostService', function(PostService) {\r\n    return {\r\n        restrict: 'A',\r\n        transclude: true,\r\n        replace: true,\r\n        templateUrl: 'partials/templates/Post/posts.html',\r\n        scope: {\r\n            posts: '=testifyPosts',\r\n            post_status: '=postStatus'\r\n        },\r\n        controller: function($scope) {\r\n            //console.log($scope.posts);\r\n\r\n            this.SDeletePost = function(post_id) {\r\n                PostService.post(post_id).remove().then(function(r) {\r\n                    var i = $scope.posts.map(function(x) {\r\n                            return x.id;\r\n                        })\r\n                        .indexOf(post_id);\r\n                    //console.log($scope);\r\n                    //array.splice(removeIndex, 1);\r\n                    $scope.posts.splice(i, 1);\r\n                    //scope.post = \"\";\r\n                });\r\n\r\n            };\r\n\r\n            $scope.noPosts = false;\r\n\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('testifyPost', ['PostService', 'CommentService', 'Auth', 'UXService', 'Facebook', 'appUrl', function(PostService, CommentService, Auth, UXService, Facebook, appUrl) {\r\n    return {\r\n        restrict: 'A',\r\n        require: \"^?testifyPosts\",\r\n        scope: {\r\n            post: '=testifyPost'\r\n        },\r\n        templateUrl: 'partials/templates/Post/post.html',\r\n        link: function(scope, element, attrs, SuperTPostsCtrl) {\r\n            scope.user = Auth.userProfile;\r\n            scope.CommentsUI = {\r\n                loading: false\r\n            };\r\n\r\n            var actions = {\r\n                'App\\\\Tap': ['tapped into', 'this post'],\r\n                'App\\\\Favorite': ['favorited', 'this post'],\r\n                'App\\\\Amen': ['said amen', 'to this post'],\r\n                'App\\\\Comment': ['commented', 'on this post']\r\n            };\r\n\r\n            if (scope.post.user_ref_activities) {\r\n                if (scope.post.user_ref_activities.length > 0) {\r\n                    interpretation = '';\r\n                    i = 0;\r\n                    var action;\r\n                    var ref_activities = scope.post.user_ref_activities;\r\n                    l = scope.post.user_ref_activities.length;\r\n\r\n                    if (l == 1) {\r\n                        a_t = ref_activities[0].action_type;\r\n                        interpretation += ' ' +\r\n                            actions[a_t][0] +\r\n                            ' ' + actions[a_t][1];\r\n                    } else if (l == 2) {\r\n\r\n                        for (action in ref_activities) {\r\n                            i++;\r\n                            a_t = ref_activities[action].action_type;\r\n\r\n                            if (i == l - 1) {\r\n                                interpretation += ' ' + actions[a_t][0];\r\n                            }\r\n\r\n                            if (i == l) {\r\n                                interpretation += ' and ' + actions[a_t][0] + ' ' + actions[a_t][1];\r\n                            }\r\n                        }\r\n                    } else if (l > 2) {\r\n                        for (action in ref_activities) {\r\n                            i++;\r\n                            a_t = ref_activities[action].action_type;\r\n                            if (i == l - (l - 1)) {\r\n                                interpretation += ' ' + actions[a_t][0];\r\n                            } else if (i <= l - 1) {\r\n                                interpretation += ', ' + actions[a_t][0];\r\n                            } else if (l >= i) {\r\n                                interpretation += ' and ' + actions[a_t][0] + ' ' + actions[a_t][1];\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    scope.interpretation = interpretation;\r\n                }\r\n\r\n            }\r\n\r\n            var originatorEv;\r\n            scope.openMenu = function($mdOpenMenu, ev) {\r\n                originatorEv = ev;\r\n                $mdOpenMenu(ev);\r\n                //console.log(ev)\r\n            };\r\n\r\n            scope.showCommentBox = false;\r\n            scope.openCommentBox = function() {\r\n                //console.log(scope.post.post_id);\r\n                if (scope.showCommentBox === false) {\r\n                    scope.CommentsUI.loading = true;\r\n                    PostService.post(scope.post.id).getList('comments').then(function(r) {\r\n                        //console.log(r);\r\n                        scope.post.comments = r.data;\r\n                        scope.CommentsUI.loading = false;\r\n                    }, function(r) {\r\n                        scope.CommentsUI.loading = false;\r\n                    });\r\n                }\r\n                scope.showCommentBox = true;\r\n            };\r\n\r\n            scope.addComment = function(ev) {\r\n                var doCommentPost = function() {\r\n                    //console.log(Date());\r\n                    if (scope.commentBox) {\r\n                        PostService.post(scope.post.id).post('comments', {\r\n                            text: scope.commentBox\r\n                        }).then(function(r) {\r\n                            //console.log(r);\r\n\r\n                            //console.log(comment.text);\r\n                            scope.post.comments_count++;\r\n                            scope.post.comments.unshift(r.data);\r\n                            scope.commentBox = \"\";\r\n\r\n                        });\r\n                    }\r\n                };\r\n                if (Auth.userProfile.authenticated) {\r\n                    doCommentPost();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doCommentPost();\r\n                    }, function() {\r\n                        v = \"Unsuccessful login\";\r\n                    });\r\n                }\r\n            };\r\n\r\n            scope.deleteComment = function(comment_id) {\r\n                var comment = CommentService.comment(comment_id);\r\n                comment.remove().then(function(r) {\r\n                    //console.log(r);\r\n                    var i = scope.post.comments.map(function(x) {\r\n                            return x.id;\r\n                        })\r\n                        .indexOf(comment_id);\r\n                    //console.log($scope);\r\n                    //array.splice(removeIndex, 1);\r\n                    scope.post.comments.splice(i, 1);\r\n                    scope.post.comments_count--;\r\n\r\n                    //scope.post = \"\";\r\n\r\n                });\r\n            };\r\n\r\n            scope.toggleFavorite = function(ev) {\r\n                //console.log(scope.post.post_id)\r\n                var doFavorite = function() {\r\n                    if (scope.post.favorited) {\r\n                        scope.post.favorited = false;\r\n                        scope.post.favorites_count--;\r\n                        PostService.post(scope.post.id).one('favorites').remove().then(function(r) {\r\n                            //console.log(r);\r\n                            scope.post.favorited = r.data.status;\r\n                            scope.post.favorites_count = r.data.count;\r\n                        });\r\n                    } else {\r\n                        scope.post.favorited = true;\r\n                        scope.post.favorites_count++;\r\n                        PostService.post(scope.post.id).one('favorites').post().then(function(r) {\r\n                            //console.log(\"created\");\r\n                            scope.post.favorited = r.data.status;\r\n                            scope.post.favorites_count = r.data.count;\r\n                        });\r\n                    }\r\n                };\r\n                if (Auth.userProfile.authenticated) {\r\n                    doFavorite();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doFavorite();\r\n                    });\r\n\r\n                }\r\n                //console.log(scope.post);\r\n            };\r\n\r\n            scope.toggleTap = function(ev) {\r\n                //console.log(scope.post.post_id)\r\n                var doTap = function() {\r\n                    if (scope.post.tapped_into) {\r\n                        scope.post.tapped_into = false;\r\n                        scope.post.taps_count--;\r\n                        PostService.post(scope.post.id).one('taps').remove().then(function(r) {\r\n                            //console.log(r);\r\n                            scope.post.tapped_into = r.data.status;\r\n                            scope.post.taps_count = r.data.count;\r\n                        });\r\n                    } else {\r\n                        scope.post.tapped_into = true;\r\n                        scope.post.taps_count++;\r\n                        PostService.post(scope.post.id).one('taps').post().then(function(r) {\r\n                            //console.log(\"created\");\r\n                            scope.post.tapped_into = r.data.status;\r\n                            scope.post.taps_count = r.data.count;\r\n                        });\r\n                    }\r\n                };\r\n\r\n                if (Auth.userProfile.authenticated) {\r\n                    doTap();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doTap();\r\n                    });\r\n                }\r\n                //console.log(scope.post);\r\n            };\r\n\r\n            scope.sayAmen = function(ev) {\r\n                //console.log(scope.post.post_id)\r\n                var doSayAmen = function() {\r\n\r\n                    scope.post.amen = true;\r\n                    scope.post.amens_count++;\r\n                    PostService.post(scope.post.id).one('amens').post().then(function(r) {\r\n                        //console.log(\"created\");\r\n                        scope.post.amen = r.data.status;\r\n                        scope.post.amens_count = r.data.count;\r\n                    });\r\n\r\n                };\r\n                if (Auth.userProfile.authenticated) {\r\n                    doSayAmen();\r\n                } else {\r\n                    UXService.signinModal(ev).then(function() {\r\n                        doSayAmen();\r\n                    });\r\n\r\n                }\r\n            };\r\n\r\n            scope.shareToFb = function() {\r\n                Facebook.ui({\r\n                    method: 'feed',\r\n                    //link: 'https://testify-for-testimonies.herokuapp.com/api/fb-share/56',\r\n                    link: appUrl,\r\n                    picture: appUrl + '/img/testify-fb-share-pic.png',\r\n                    name: 'Testify',\r\n                    caption: 'Sharing God\\'s goodness',\r\n                    description: scope.post.text + ' (Tesfify is a community for sharing your testimonies and engaging with other people\\'s testimonies)'\r\n                }, function(response) {});\r\n            };\r\n\r\n            scope.deletePost = function() {\r\n                //scope.post = null;\r\n                SuperTPostsCtrl.SDeletePost(scope.post.id);\r\n\r\n            };\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('myIcon', ['$timeout', function($timeout) {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            icon: \"@\"\r\n        },\r\n        replace: true,\r\n        link: function(scope, e, attrs) {\r\n            //scope.icon = scope.icon;\r\n        },\r\n        template: \"<i class='mdi mdi-{{icon}}'></i>\"\r\n    };\r\n}]);\r\n\r\napp.directive('testifyComposer', [function() {\r\n    return {\r\n        restrict: 'A',\r\n        templateUrl: 'partials/app/testifyComposer.html',\r\n        //controller: 'TComposerCtrl'\r\n    };\r\n}]);\r\n","app.filter('socialCounter', function() {\r\n    return function(num) {\r\n        out = num;\r\n        if (num) {\r\n            if (num >= 999 && num < 999999) {\r\n                out = Math.round(num / 100) / 10 + \"K\";\r\n            } else if (num >= 999999 && num < 999999999) {\r\n                out = Math.round(num / 100000) / 10 + \"M\";\r\n            } else if (num >= 999999999) {\r\n                out = Math.round(num / 100000000) / 10 + \"B\";\r\n            }\r\n        }\r\n        return out;\r\n    };\r\n});\r\n","app.factory('AppService', ['Restangular', 'Auth', 'Me', function(Restangular,\n  Auth, Me) {\n\n  var app = {\n    posts: []\n  };\n\n  Auth.refreshProfile().then(function(r) {\n    //Me.callInit();\n    //console.log(\"letsee\");\n  });\n  //console.log(\"appService\");\n\n  var search = Restangular.service('search');\n\n  var getPosts = Restangular.all('posts');\n\n  var getCategories = Restangular.all('categories').getList();\n\n  var getCategoriesWithCount = Restangular.all('categories').getList({\n    count: true\n  });\n\n\n  return {\n    app: app,\n    search: search,\n    getPosts: getPosts,\n    getCategories: getCategories,\n    getCategoriesWithCount: getCategoriesWithCount\n\n  };\n}]);\n\napp.factory('Auth', ['$http', '$localStorage', 'Restangular', '$q', '$state',\n  'Facebook',\n  function($http, $localStorage, Restangular, $q, $state, Facebook) {\n    var user = {\n      authenticated: false,\n      id: null,\n      hash_id: null,\n      name: \"Guest\",\n      firstName: \"Guest\",\n      lastName: \"Guest\",\n      sex: null,\n      location: null,\n      email: null,\n      avatar: \"img/guest.png\",\n      profile: null\n    };\n\n    Restangular.setFullResponse(true);\n\n    function urlBase64Decode(str) {\n      var output = str.replace('-', '+').replace('_', '/');\n      switch (output.length % 4) {\n        case 0:\n          break;\n        case 2:\n          output += '==';\n          break;\n        case 3:\n          output += '=';\n          break;\n        default:\n          throw 'Illegal base64url string!';\n      }\n      return window.atob(output);\n    }\n\n    function getClaimsFromToken() {\n      var token = $localStorage.token;\n      var claims = {};\n\n      //console.log(token);\n      if (typeof token !== 'undefined') {\n        var encoded = token.split('.')[1];\n        claims = JSON.parse(urlBase64Decode(encoded));\n      }\n\n      return claims;\n    }\n\n    var refreshProfile = function() {\n      //console.log(\"refresh\")\n      //console.log(getClaimsFromToken());\n\n      var d = $q.defer();\n      if (getClaimsFromToken().hash_id && getClaimsFromToken().exp > Date\n        .now() / 1000) {\n        //console.log(\"truthy\");\n        //console.log(getClaimsFromToken().hash_id);\n        //console.log(Date.now() / 1000);\n        //console.log(getClaimsFromToken().exp);\n\n        Restangular.one('users', getClaimsFromToken().hash_id).get({\n          profile: true\n        }).then(\n          function(r) {\n            buildAuthProfile(r.data);\n            d.resolve(true);\n            //console.log(getClaimsFromToken().id);\n          },\n          function(r) {\n            if (r.status == 404) {\n              resetProfile();\n              //console.log(\"user not found\");\n              logout();\n            }\n            d.resolve(false);\n\n          });\n      } else {\n        //console.log(Date.now() / 1000);\n        //console.log(getClaimsFromToken().exp);\n        //delete $localStorage.token;\n        resetProfile();\n      }\n\n      return d.promise;\n    };\n\n    var buildAuthProfile = function(u) {\n      //console.log(u);\n      user.authenticated = true;\n      user.id = u.id;\n      user.hash_id = u.hash_id;\n      user.name = u.first_name + ' ' + u.last_name;\n      user.firstName = u.first_name;\n      user.lastName = u.last_name;\n      user.username = u.username;\n      user.location = u.location;\n      user.email = u.email;\n      user.avatar = u.avatar;\n      user.profile = u.profile;\n    };\n\n    var saveToken = function(token) {\n\n      $localStorage.token = token;\n      user.token = token;\n    };\n\n    var signup = function(newUser) {\n      var d = $q.defer();\n\n      Restangular.service('signup').post(newUser).then(function(r) {\n        //console.log(r);\n        saveToken(r.data.token);\n        refreshProfile(); //Refresh session data here\n        //$scope.refreshProfile();\n        $state.go('web.app.dashboard.home');\n        d.resolve(r.data.token);\n      }, function() {\n        d.reject();\n      });\n\n      return d.promise;\n    };\n\n    var signin = function(l) {\n      var d = $q.defer();\n\n      Restangular.service('authenticate').post(l).then(function(r) {\n        //console.log(r);\n        saveToken(r.data.token);\n        refreshProfile(); //Refresh session data here\n        //$scope.refreshProfile();\n        $state.go('web.app.dashboard.home');\n        d.resolve(r.data.token);\n      }, function() {\n        d.reject();\n      });\n\n      return d.promise;\n    };\n\n    var signinFB = function() {\n      //console.log(\"loginctrl\");\n      var d = $q.defer();\n\n      var doFbLogin = function(fb_response) {\n        var d = $q.defer();\n        r = fb_response;\n        if (r.status === 'connected') {\n          json = {\n            \"fb_access_token\": r.authResponse.accessToken\n          };\n          Restangular.service('fb-token').post(json).then(function(r) {\n            saveToken(r.data.token);\n            refreshProfile(); //Refresh session data here\n            //console.log(r);\n            d.resolve(r);\n          }, function(r) {\n            d.reject(r);\n          });\n        } else {\n          d.reject();\n        }\n        return d.promise;\n      };\n\n      Facebook.login(function(r) {\n        //console.log(r);\n        doFbLogin(r).then(function() {\n          d.resolve();\n        }, function(r) {\n          d.reject(r);\n        });\n      });\n\n      return d.promise;\n    };\n\n    var logout = function() {\n      tokenClaims = {};\n      delete $localStorage.token;\n      refreshProfile();\n      $state.go('web.app.login');\n    };\n\n    var resetProfile = function() {\n      user.authenticated = false;\n      user.id = null;\n      user.hash_id = null;\n      user.name = \"Guest\";\n      user.firstName = \"Guest\";\n      user.lastName = \"Guest\";\n      user.sex = null;\n      user.location = null;\n      user.email = null;\n      user.avatar = \"img/guest.png\";\n    };\n\n    return {\n      signup: signup,\n      signin: signin,\n      signinFB: signinFB,\n      logout: logout,\n      refreshProfile: refreshProfile,\n      resetProfile: resetProfile,\n      userProfile: user,\n      token: getClaimsFromToken()\n    };\n  }\n]);\n\napp.factory('Me', ['Auth', 'Restangular', '$q', function(Auth, Restangular, $q) {\n\n  var uid = Auth.token.sub;\n  //console.log(uid);\n\n  var me = Restangular.one('users', uid);\n\n  var sendPost = function(o) {\n    return Restangular.all('posts').post({\n      \"post\": o.post,\n      \"anonymous\": o.anonymous,\n      \"categories\": o.categories,\n      \"images\": o.images\n    });\n  };\n\n  return {\n    id: uid,\n    me: me,\n    authenticated: Auth.userProfile.authenticated,\n    favorites: me.all('favorites'),\n    profile: Auth.userProfile,\n    sendPost: sendPost\n\n  };\n}]);\n\napp.factory('PostService', ['Restangular', '$q', function(Restangular, $q) {\n\n  var posts = Restangular.all('posts');\n\n  var post = function(id) {\n    return Restangular.one('posts', id);\n  };\n\n  return {\n    post: post\n  };\n\n}]);\n\napp.factory('CommentService', ['Restangular', '$q', function(Restangular, $q) {\n\n  var posts = Restangular.all('comments');\n\n  var comment = function(id) {\n    return Restangular.one('comments', id);\n  };\n\n  return {\n    comment: comment\n  };\n\n}]);\n\napp.factory('SocialService', ['Facebook', 'Auth', function(Facebook, Auth) {\n\n\n  return {\n\n  };\n}]);\n\napp.factory('UXService', ['$mdDialog', '$mdToast', 'Auth', '$q', '$document',\n  function($mdDialog, $mdToast, Auth, $q, $document) {\n\n    var signinModal = function(ev) {\n      var d = $q.defer();\n      $mdDialog.show({\n          controller: 'UXModalLoginCtrl',\n          templateUrl: 'partials/app/ux.signin.modal.html',\n          parent: document.getElementsByClassName(\"dialog-holder\"),\n          targetEvent: ev,\n          clickOutsideToClose: true\n        })\n        .then(function(res) {\n          d.resolve(res);\n        }, function() {\n          d.reject();\n        });\n\n      return d.promise;\n    };\n\n    var alert = function(ev, text) {\n      // Appending dialog to document.body to cover sidenav in docs app\n      // Modal dialogs should fully cover application\n      // to prevent interaction outside of dialog\n      $mdDialog.show(\n        $mdDialog.alert()\n        .parent(angular.element(document.querySelector('body')))\n        .clickOutsideToClose(true)\n        .title(text)\n        //.content(text)\n        .ariaLabel(text)\n        .ok('OK')\n        .targetEvent(ev)\n      );\n    };\n\n    var toast = function(text) {\n      $mdToast.show(\n        $mdToast.simple()\n        .content(text)\n        .position('top left')\n        .parent($document[0].querySelector('body'))\n        .hideDelay(7000)\n      );\n\n    };\n\n    var UXLoginFB = function() {\n      Auth.signinFB().then(function() {\n        $mdDialog.hide(true);\n      }, function() {\n        d = \"Do nothing\";\n      });\n    };\n\n    var UXSubmitLogin = function(loginDetails) {\n      Auth.signin(loginDetails).then(function(r) {\n        $mdDialog.hide(true);\n      }, function(err) {\n        console.log(err);\n        //console.log($scope.loginDetails);\n      });\n    };\n\n\n\n    return {\n\n      signinModal: signinModal,\n      alert: alert,\n      toast: toast,\n      UXLoginFB: UXLoginFB,\n      UXSubmitLogin: UXSubmitLogin\n\n    };\n  }\n]);\n"],"sourceRoot":"/source/"}